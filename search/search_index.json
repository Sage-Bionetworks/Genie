{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#aacr-project-genie","title":"AACR Project GENIE","text":""},{"location":"#introduction","title":"Introduction","text":"<p>This repository documents code used to gather, QC, standardize, and analyze data uploaded by institutes participating in AACR's Project GENIE (Genomics, Evidence, Neoplasia, Information, Exchange).</p>"},{"location":"#additional-documentation","title":"Additional Documentation","text":"<p>Visit the Project Genie Data Portal to learn more about our data</p>"},{"location":"getting_started/","title":"Getting Started","text":""},{"location":"getting_started/#dependencies","title":"Dependencies","text":"<p>This package contains both R, Python and cli tools.  These are tools or packages you will need, to be able to reproduce these results:</p> <ul> <li>Python &gt;=3.8 or &lt;3.10<ul> <li><code>pip install -r requirements.txt</code></li> </ul> </li> <li>bedtools</li> <li>R 4.2.2<ul> <li><code>renv::install()</code></li> <li>Follow instructions here to install synapser</li> </ul> </li> <li>Java &gt; 8<ul> <li>For mac users, it seems to work better to run <code>brew install java</code></li> </ul> </li> <li>wget<ul> <li>For mac users, have to run <code>brew install wget</code></li> </ul> </li> </ul>"},{"location":"getting_started/#installation","title":"Installation","text":""},{"location":"getting_started/#pypi","title":"PyPi","text":"<p>The aacrgenie package is available from PyPI. It can be installed or upgraded with pip.</p> <pre><code>pip install aacrgenie\n</code></pre>"},{"location":"getting_started/#local","title":"Local","text":"<p>Source code and development versions are available on Github. Installing from source:</p> <pre><code>git clone https://github.com/Sage-Bionetworks/Genie.git\ncd Genie\n</code></pre> <p>Install the packages locally.</p> <pre><code>pip install -e .\npip install -r requirements.txt\npip install -r requirements-dev.txt\n</code></pre> <p>You can stay on the main branch to get the latest stable release or check out the develop branch or a tagged revision:</p> <pre><code>git checkout &lt;branch or tag&gt;\n</code></pre>"},{"location":"getting_started/#configuration","title":"Configuration","text":"<p>Configure the Synapse client to authenticate to Synapse.</p> <ol> <li>Create a Synapse Personal Access token (PAT).</li> <li> <p>Add a <code>~/.synapseConfig</code> file with the following information:</p> <pre><code>[authentication]\nauthtoken = &lt;PAT here&gt;\n</code></pre> </li> <li> <p>OR set an environmental variable</p> <pre><code>export SYNAPSE_AUTH_TOKEN=&lt;PAT here&gt;\n</code></pre> </li> <li> <p>Confirm you can log in to synapse in your terminal.</p> <pre><code>synapse login\n</code></pre> </li> </ol>"},{"location":"reference/fileformats/assay/","title":"Assay Information","text":""},{"location":"reference/fileformats/assay/#genie_registry.assay","title":"<code>genie_registry.assay</code>","text":"<p>Assay information class</p>"},{"location":"reference/fileformats/assay/#genie_registry.assay-classes","title":"Classes","text":""},{"location":"reference/fileformats/assay/#genie_registry.assay.Assayinfo","title":"<code>Assayinfo</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p> <p>Assay information file type</p>"},{"location":"reference/fileformats/assay/#genie_registry.assay.Assayinfo-functions","title":"Functions","text":""},{"location":"reference/fileformats/assay/#genie_registry.assay.Assayinfo.process_steps","title":"<code>process_steps(assay_info_df, newPath, databaseSynId)</code>","text":"<p>Process bed input and update bed database</p> PARAMETER DESCRIPTION <code>assay_info_df</code> <p>Assay information dataframe</p> <p> </p> <code>newPath</code> <p>Path to processed assay information</p> <p> </p> <code>databaseSynId</code> <p>assay information database synapse id</p> <p> </p> RETURNS DESCRIPTION <p>path to assay information dataframe</p>"},{"location":"reference/fileformats/assay/#genie_registry.assay.Assayinfo.validate_all_seq_assay_ids_exist_in_clinical_database","title":"<code>validate_all_seq_assay_ids_exist_in_clinical_database(all_seq_assays, skip_database_checks)</code>","text":"<p>Validates that all SEQ_ASSAY_IDs in the clinical sample database     for that center exists in the assay information file for that center.</p> <p>Conditions</p> Condition Result Assay information file has more SEQ_ASSAY_IDs than in clinical database \u2705 PASS Assay information file has the same SEQ_ASSAY_IDs as in clinical database \u2705 PASS Assay information file has less SEQ_ASSAY_IDs than in clinical database \u274c FAIL PARAMETER DESCRIPTION <code>all_seq_assays</code> <p>list of all the SEQ_ASSAY_IDs in the assay information file</p> <p> TYPE: <code>dict</code> </p> <code>skip_database_checks</code> <p>Whether to skip this validation check since it requires access to the internal clinical sample database</p> <p> TYPE: <code>bool</code> </p> RETURNS DESCRIPTION <code>str</code> <p>error message</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/bed/","title":"Bed","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed","title":"<code>genie_registry.bed</code>","text":"<p>GENIE bed class and functions</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed.LOGGER","title":"<code>LOGGER = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed-classes","title":"Classes","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed.bed","title":"<code>bed</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p> <p>GENIE bed format</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed.bed-functions","title":"Functions","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed.bed.create_gene_panel","title":"<code>create_gene_panel(beddf, seq_assay_id, gene_panel_path, parentid)</code>","text":"<p>Create bed file and gene panel files from the bed file</p> PARAMETER DESCRIPTION <code>beddf</code> <p>bed dataframe</p> <p> </p> <code>seq_assay_id</code> <p>GENIE SEQ_ASSAY_ID</p> <p> </p> <code>gene_panel_path</code> <p>Gene panel folder path</p> <p> </p> <code>parentid</code> <p>Synapse id of gene panel folder</p> <p> </p> RETURNS DESCRIPTION <p>pd.DataFrame: configured bed dataframe</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed.bed.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>Standardize and grab seq assay id from the bed file path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>bed file path</p> <p> </p> RETURNS DESCRIPTION <code>dict</code> <p>GENIE seq assay id</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed.bed.process_steps","title":"<code>process_steps(beddf, newPath, parentId, databaseSynId, seq_assay_id)</code>","text":"<p>Process bed file, update bed database, write bed file to path</p> PARAMETER DESCRIPTION <code>beddf</code> <p>input bed data</p> <p> TYPE: <code>DataFrame</code> </p> <code>newPath</code> <p>Path to new bed file</p> <p> TYPE: <code>str</code> </p> <code>parentId</code> <p>Synapse id to store gene panel file</p> <p> TYPE: <code>str</code> </p> <code>databaseSynId</code> <p>Synapse id of bed database</p> <p> TYPE: <code>str</code> </p> <code>seq_assay_id</code> <p>GENIE seq assay id</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Path to new bed file</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/bed/#genie_registry.bed-functions","title":"Functions","text":""},{"location":"reference/fileformats/bed/#genie_registry.bed.create_gtf","title":"<code>create_gtf(dirname)</code>","text":"<p>Create exon.gtf and gene.gtf from GRCh37 gtf</p> PARAMETER DESCRIPTION <code>dirname</code> <p>Directory where these files should live</p> <p> </p> RETURNS DESCRIPTION <code>exon_gtf_path</code> <p>exon GTF</p> <code>gene_gtf_path</code> <p>gene GTF</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed._add_feature_type_tobeddf","title":"<code>_add_feature_type_tobeddf(filepath, featuretype)</code>","text":"<p>Add Feature_Type to dataframe</p> PARAMETER DESCRIPTION <code>filepath</code> <p>path to bed</p> <p> </p> <code>featuretype</code> <p>exon, intron, or intergenic</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>empty dataframe or dataframe with appended feature type</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed.add_feature_type","title":"<code>add_feature_type(temp_bed_path, exon_gtf_path, gene_gtf_path)</code>","text":"<p>Add Feature_Type to bed file (exon, intron, intergenic)</p> PARAMETER DESCRIPTION <code>temp_bed_path</code> <p>BED file without feature type</p> <p> </p> <code>exon_gtf_path</code> <p>exon gtf</p> <p> </p> <code>gene_gtf_path</code> <p>gene gtf</p> <p> </p> RETURNS DESCRIPTION <code>genie_combined_path</code> <p>Path to final bed file</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed._check_region_overlap","title":"<code>_check_region_overlap(row, gene_positiondf)</code>","text":"<p>Check if the submitted bed symbol + region overlaps with the actual gene's positions</p> PARAMETER DESCRIPTION <code>row</code> <p>row in bed file (genomic region)</p> <p> </p> <code>gene_positiondf</code> <p>Reference gene position dataframe</p> <p> </p> Return <p>True if the region does overlap.</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed._get_max_overlap_index","title":"<code>_get_max_overlap_index(overlap, bed_length, boundary)</code>","text":"<p>Calculate the ratio of overlap between the submitted bed region and gene position dataframe and return the index of the max overlapping region</p> PARAMETER DESCRIPTION <code>overlap</code> <p>Possible overlapping region</p> <p> </p> <code>bed_length</code> <p>Length of submitted region</p> <p> </p> <code>boundary</code> <p>specified ratio overlap</p> <p> </p> RETURNS DESCRIPTION <p>Index of regions with maximum overlap or None</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed._map_position_within_boundary","title":"<code>_map_position_within_boundary(row, positiondf, boundary=0.9)</code>","text":"<p>Map positions and checks if posision is contained within the specified percentage boundary</p> PARAMETER DESCRIPTION <code>row</code> <p>Row in bed file (genomic region)</p> <p> </p> <code>positiondf</code> <p>Reference bed position dataframe</p> <p> </p> <code>boundary</code> <p>Percent boundary defined</p> <p> DEFAULT: <code>0.9</code> </p> Return <p>pd.Series: mapped position</p>"},{"location":"reference/fileformats/bed/#genie_registry.bed.remap_symbols","title":"<code>remap_symbols(row, gene_positiondf)</code>","text":"<p>Remap hugo symbols if there is no overlap between submitted bed region and gene positions.</p> PARAMETER DESCRIPTION <code>row</code> <p>start and end position</p> <p> </p> <code>gene_positiondf</code> <p>Actual gene position dataframe</p> <p> </p> Return <p>bool or Series: if the gene passed in need to be remapped or                 the remapped gene</p>"},{"location":"reference/fileformats/clinical/","title":"Clinical","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical","title":"<code>genie_registry.clinical</code>","text":"<p>Clinical file format validation and processing</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical-functions","title":"Functions","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_year","title":"<code>_check_year(clinicaldf, year_col, filename, allowed_string_values=None)</code>","text":"<p>Check year columns</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>year_col</code> <p>YEAR column</p> <p> TYPE: <code>int</code> </p> <code>filename</code> <p>Name of file</p> <p> TYPE: <code>str</code> </p> <code>allowed_string_values</code> <p>list of other allowed string values</p> <p> TYPE: <code>Optional[list]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Error message</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_int_dead_consistency","title":"<code>_check_int_dead_consistency(clinicaldf)</code>","text":"<p>Check if vital status interval and dead column are consistent</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical Data Frame</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Error message if values and inconsistent or blank string</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_int_year_consistency","title":"<code>_check_int_year_consistency(clinicaldf, cols, string_vals)</code>","text":"<p>Check if vital status interval and year columns are consistent in their values.</p> What determines text consistency <ul> <li>IF exactly one column in the columns being checked is \"Unknown\" in that row,     THEN that column with the \"Unknown\" value has to be the interval column</li> <li>OTHERWISE values must be either all numeric or the SAME string value in     for each row for all cols that are being checked</li> </ul> <p>Here we will show examples of invalid vs valid text consistency:</p> <pre><code>Note: INT_CONTACT and YEAR_CONTACT are the columns being checked, and INT_CONTACT\nis the interval column while YEAR_CONTACT is the year column.\n</code></pre> VALID Examples INT_CONTACT YEAR_CONTACT Unknown 2012 INT_CONTACT YEAR_CONTACT Unknown Unknown INT_CONTACT YEAR_CONTACT 2012 2012 INT_CONTACT YEAR_CONTACT Not Collected Not Collected INVALID Examples INT_CONTACT YEAR_CONTACT 2012 Unknown INT_CONTACT YEAR_CONTACT 2012 Not Collected INT_CONTACT YEAR_CONTACT Not collected Not Released PARAMETER DESCRIPTION <code>clinicaldf</code> <p>input Clinical Data Frame</p> <p> TYPE: <code>DataFrame</code> </p> <code>cols</code> <p>Columns in the clinical data frame to be checked for consistency</p> <p> TYPE: <code>List[str]</code> </p> <code>string_vals</code> <p>String values that aren't integers</p> <p> TYPE: <code>List[str]</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Error message if values are inconsistent or blank string</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_year_death_validity","title":"<code>_check_year_death_validity(clinicaldf)</code>","text":"<p>YEAR_DEATH should alway be greater than or equal to YEAR_CONTACT when they are both available. This function checks if YEAR_DEATH &gt;= YEAR_CONTACT and returns row indices of invalid YEAR_DEATH rows.</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical Data Frame</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>Index</code> <p>pd.Index: The row indices of the row with YEAR_DEATH &lt; YEAR_CONTACT in the input clinical data</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_year_death_validity_message","title":"<code>_check_year_death_validity_message(invalid_year_death_indices)</code>","text":"<p>This function returns the error and warning messages if the input clinical data has row with YEAR_DEATH &lt; YEAR_CONTACT</p> PARAMETER DESCRIPTION <code>invalid_year_death_indices</code> <p>The row indices of the rows with YEAR_DEATH &lt; YEAR_CONTACT in the input clinical data</p> <p> TYPE: <code>Index</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Tuple[str, str]: The error message that tells you how many patients with invalid YEAR_DEATH values that your</p> <code>str</code> <p>input clinical data has</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_int_dod_validity","title":"<code>_check_int_dod_validity(clinicaldf)</code>","text":"<p>INT_DOD should alway be greater than or equal to INT_CONTACT when they are both available. This function checks if INT_DOD &gt;= INT_CONTACT and returns row indices of invalid INT_DOD rows.</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical Data Frame</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>Index</code> <p>pd.Index: The row indices of the row with INT_DOD &lt; INT_CONTACT in the input clinical data</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical._check_int_dod_validity_message","title":"<code>_check_int_dod_validity_message(invalid_int_dod_indices)</code>","text":"<p>This function returns the error and warning messages if the input clinical data has row with INT_DOD &lt; INT_CONTACT</p> PARAMETER DESCRIPTION <code>invalid_int_dod_indices</code> <p>The row indices of the rows with INT_DOD &lt; INT_CONTACT in the input clinical data</p> <p> TYPE: <code>Index</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Tuple[str, str]: The error message that tells you how many patients with invalid INT_DOD values that your</p> <code>str</code> <p>input clinical data has</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.remap_clinical_values","title":"<code>remap_clinical_values(clinicaldf, sex_mapping, race_mapping, ethnicity_mapping, sampletype_mapping)</code>","text":"<p>Remap clinical attributes from integer to string values</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical data</p> <p> TYPE: <code>DataFrame</code> </p> <code>sex_mapping</code> <p>Sex mapping data</p> <p> TYPE: <code>DataFrame</code> </p> <code>race_mapping</code> <p>Race mapping data</p> <p> TYPE: <code>DataFrame</code> </p> <code>ethnicity_mapping</code> <p>Ethnicity mapping data</p> <p> TYPE: <code>DataFrame</code> </p> <code>sample_type</code> <p>Sample type mapping data</p> <p> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>Mapped clinical dataframe</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical","title":"<code>genie_registry.clinical.Clinical</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._fileType","title":"<code>_fileType = 'clinical'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._process_kwargs","title":"<code>_process_kwargs = ['newPath', 'parentId', 'clinicalTemplate', 'sample', 'patient', 'patientCols', 'sampleCols']</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical-functions","title":"Functions","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._validateFilename","title":"<code>_validateFilename(filePath)</code>","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical.update_clinical","title":"<code>update_clinical(row)</code>","text":"<p>Transform the values of each row of the clinical file</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical.uploadMissingData","title":"<code>uploadMissingData(df, col, dbSynId, stagingSynId)</code>","text":"<p>Uploads missing clinical samples / patients</p> PARAMETER DESCRIPTION <code>df</code> <p>dataframe with clinical data</p> <p> TYPE: <code>DataFrame</code> </p> <code>col</code> <p>column in dataframe. Usually SAMPLE_ID or PATIENT_ID.</p> <p> TYPE: <code>str</code> </p> <code>dbSynId</code> <p>Synapse table Synapse id</p> <p> TYPE: <code>str</code> </p> <code>stagingSynId</code> <p>Center Synapse staging Id</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._process","title":"<code>_process(clinical, clinicalTemplate)</code>","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>Gather preprocess parameters</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <p>dict with keys - 'clinicalTemplate', 'sample', 'patient',              'patientCols', 'sampleCols'</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical.process_steps","title":"<code>process_steps(clinicalDf, newPath, parentId, clinicalTemplate, sample, patient, patientCols, sampleCols)</code>","text":"<p>Process clincial file, redact PHI values, upload to clinical database</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._validate_oncotree_code_mapping","title":"<code>_validate_oncotree_code_mapping(clinicaldf, oncotree_mapping)</code>  <code>staticmethod</code>","text":"<p>Checks that the oncotree codes in the input clinical data is a valid oncotree code from the official oncotree site</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>clinical input data to validate</p> <p> TYPE: <code>DataFrame</code> </p> <code>oncotree_mapping</code> <p>table of official oncotree mappings</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>Index</code> <p>pd.Index: row indices of unmapped oncotree codes in the</p> <code>Index</code> <p>input clinical data</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._validate_oncotree_code_mapping_message","title":"<code>_validate_oncotree_code_mapping_message(clinicaldf, unmapped_oncotree_indices)</code>  <code>staticmethod</code>","text":"<p>This function returns the error and warning messages if the input clinical data has row indices with unmapped oncotree codes</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>input clinical data</p> <p> TYPE: <code>DataFrame</code> </p> <code>unmapped_oncotree_indices</code> <p>row indices of the input clinical data with unmapped oncotree codes</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>Tuple[str, str]</code> <p>Tuple[str, str]: error message that tells you how many samples AND the unique unmapped oncotree codes that your input clinical data has</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._validate_sample_class_and_type","title":"<code>_validate_sample_class_and_type(clinicaldf, sampletype_mapping)</code>","text":"<p>Validates that the values of SAMPLE_CLASS and SAMPLE_TYPE in the clinical data is consistent and returns error message with the error(s).</p> The following conditions must be met <ul> <li>When SAMPLE_CLASS is <code>cfDNA</code>, SAMPLE_TYPE must be 8</li> <li>When SAMPLE_TYPE is 8, SAMPLE_CLASS must be <code>cfDNA</code></li> </ul> Valid Examples SAMPLE_TYPE SAMPLE_CLASS 8 cfDNA 8 cfDNA SAMPLE_TYPE SAMPLE_CLASS 8 cfDNA 8 cfDNA 2 Tumor Invalid Examples SAMPLE_TYPE SAMPLE_CLASS 8 Other 2 cfDNA SAMPLE_TYPE SAMPLE_CLASS 8 cfDNA 8 Other SAMPLE_TYPE SAMPLE_CLASS 8 NaN 2 cfDNA PARAMETER DESCRIPTION <code>clinicaldf</code> <p>input clinical data</p> <p> TYPE: <code>DataFrame</code> </p> <code>sampletype_mapping</code> <p>sample type mapping table containing the mappings of the SAMPLE_TYPE to the value behind it. This is used to check the SAMPLE_TYPE and SAMPLE_CLASS values.</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>str</code> <p>error message of the concatenated error message(s)</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._validate","title":"<code>_validate(clinicaldf)</code>","text":"<p>This function validates the clinical file to make sure it adhere to the clinical SOP.</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Merged clinical file with patient and sample         information</p> <p> </p> RETURNS DESCRIPTION <p>Error message</p> Note <p>SAMPLE_CLASS is a required column and must contain only 'Tumor' or 'cfDNA' values.</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._get_dataframe","title":"<code>_get_dataframe(filePathList)</code>","text":""},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._cross_validate_bed_files_exist","title":"<code>_cross_validate_bed_files_exist(clinicaldf)</code>","text":"<p>Check that a bed file exist per SEQ_ASSAY_ID value in clinical file</p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._cross_validate_bed_files_exist_message","title":"<code>_cross_validate_bed_files_exist_message(missing_bed_files)</code>","text":"<p>Gets the warning/error messages given the missing bed files list</p> PARAMETER DESCRIPTION <code>missing_bed_files</code> <p>list of missing bed files</p> <p> TYPE: <code>list</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>error + warning</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._cross_validate_assay_info_has_seq","title":"<code>_cross_validate_assay_info_has_seq(clinicaldf)</code>","text":"<p>Cross validates that assay information file has all the SEQ_ASSAY_IDs present in the clinical file TODO: Refactor this function (similar to _cross_validate in maf) once the clinical files have been taken care of so that it can be generalized to any file type</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>input clinical data</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>errors and warnings</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/fileformats/clinical/#genie_registry.clinical.Clinical._cross_validate","title":"<code>_cross_validate(clinicaldf)</code>","text":"<p>Cross-validation for clinical file(s)</p>"},{"location":"reference/fileformats/cna/","title":"Cna","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna","title":"<code>genie_registry.cna</code>","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna-classes","title":"Classes","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna.cna","title":"<code>cna</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/cna/#genie_registry.cna.cna-functions","title":"Functions","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna.cna.validate_no_dup_symbols_after_remapping","title":"<code>validate_no_dup_symbols_after_remapping(cnvDF, skip_database_checks)</code>","text":"<p>Validates that there are no duplicated Hugo_Symbol values     after remapping the previous Hugo_Symbol column using the     bed database table. See validateSymbol for more details     on the remapping method.</p> PARAMETER DESCRIPTION <code>skip_database_checks</code> <p>Whether to skip this validation check since it requires access to the internal bed database</p> <p> TYPE: <code>bool</code> </p> RETURNS DESCRIPTION <code>str</code> <p>error message</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/cna/#genie_registry.cna-functions","title":"Functions","text":""},{"location":"reference/fileformats/cna/#genie_registry.cna.validateSymbol","title":"<code>validateSymbol(gene, bedDf, returnMappedDf=True)</code>","text":"<p>Validates the gene symbol against the gene symbol in the bed database. Note that gene symbols in the bed database have gone through processing and have been remapped to allowed actual genes if needed.</p> Two conditions must be met for the gene to be VALID <ol> <li> <p>The gene exists in the bed database table's Hugo_Symbol column</p> </li> <li> <p>The gene exists in the bed database table's ID column. Under this condition, the gene in the cna file will be REMAPPED temporarily to the bed database table's Hugo_Symbol value for the purpose of validation. The ID column is the original Hugo_Symbol column of the bed files before the Hugo_Symbol column gets mapped to valid possible gene values in the Actual Gene Positions (GRCh37) database table. See the bed fileformat module's remap_symbols function and how it gets used in processing for more info on this.</p> </li> </ol> <p>The validation throws a WARNING if the gene doesn't satisfy either of the above two conditions</p> PARAMETER DESCRIPTION <code>gene</code> <p>Gene name</p> <p> TYPE: <code>str</code> </p> <code>bedDf</code> <p>The bed database table as a pandas dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>returnMappedDf</code> <p>Return a mapped gene. Defaults to True</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>Union[str, float, bool]</code> <p>Union[str, float, bool]:</p> <code>Union[str, float, bool]</code> <p>Returns gene symbol (str if valid, a float(\"nan\") if invalid) if returnMappedDf is True</p> <code>Union[str, float, bool]</code> <p>Returns boolean for whether a gene is valid if returnMappedDf is False</p>"},{"location":"reference/fileformats/cna/#genie_registry.cna.makeCNARow","title":"<code>makeCNARow(row, symbols)</code>","text":"<p>Make CNA Row (Deprecated function)</p> <p>CNA values are no longer stored in the database</p> PARAMETER DESCRIPTION <code>row</code> <p>one row in the CNA file</p> <p> </p> <code>symbols</code> <p>list of Gene symbols</p> <p> </p>"},{"location":"reference/fileformats/cna/#genie_registry.cna.mergeCNAvalues","title":"<code>mergeCNAvalues(x)</code>","text":"<p>Merge CNA values, make sure if there are two rows that are the same gene, the values are merged</p>"},{"location":"reference/fileformats/cna/#genie_registry.cna.checkIfOneZero","title":"<code>checkIfOneZero(x)</code>","text":""},{"location":"reference/fileformats/fileformat/","title":"Fileformat","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format","title":"<code>genie.example_filetype_format</code>","text":"<p>TODO: Rename this to model.py This contains the GENIE model objects</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format-classes","title":"Classes","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.ValidationResults","title":"<code>ValidationResults</code>  <code>dataclass</code>","text":"<p>Validation results</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.ValidationResults-functions","title":"Functions","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.ValidationResults.is_valid","title":"<code>is_valid()</code>","text":"<p>True if file is valid</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.ValidationResults.collect_errors_and_warnings","title":"<code>collect_errors_and_warnings()</code>","text":"<p>Aggregates error and warnings into a string.</p> RETURNS DESCRIPTION <code>str</code> <p>A message containing errors and warnings.</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/fileformat/#genie.example_filetype_format.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/maf/","title":"Maf","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf","title":"<code>genie_registry.maf</code>","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf-classes","title":"Classes","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.maf","title":"<code>maf</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p> <p>MAF file format validation / processing</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf.maf-functions","title":"Functions","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf.maf.process_steps","title":"<code>process_steps(df)</code>","text":"<p>The processing of maf files is specific to GENIE, so not included in this function</p>"},{"location":"reference/fileformats/maf/#genie_registry.maf-functions","title":"Functions","text":""},{"location":"reference/fileformats/maf/#genie_registry.maf._check_allele_col_validity","title":"<code>_check_allele_col_validity(df)</code>","text":"<p>This function checks specific columns in a MAF (Mutation Annotation Format) file for certain conditions.</p> The following conditions must be met <p>If the MAF file has all three of these columns</p> <pre><code>- TUMOR_SEQ_ALLELE1 (TSA1)\n- TUMOR_SEQ_ALLELE2 (TSA2)\n- REFERENCE_ALLELE (REF)\n</code></pre> <p>Then, one of the following must be true</p> <pre><code>- Every value in TSA1 must be the same as the value in REF\n- Every value in TSA1 must be the same as the value in TSA2\n</code></pre> <p>Additionally, if the MAF file has at least these two columns</p> <pre><code>- REFERENCE_ALLELE (REF)\n- TUMOR_SEQ_ALLELE2 (TSA2)\n</code></pre> <p>Then</p> <pre><code>NO values in REF can match TSA2\n</code></pre> <p>These rules are important because Genome Nexus (GN) uses <code>TSA1</code> to annotate data when it's not clear which variant to use. So, there can't be a mix of rows where some have <code>TSA1</code> equal to <code>REF</code> and some have <code>TSA1</code> equal to <code>TSA2</code>.</p> Valid Examples <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE1 | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- | ----------------- |\n| C                | C                 | A                 |\n| T                | T                 | C                 |\n</code></pre> <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE1 | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- | ----------------- |\n| C                | A                 | A                 |\n| T                | C                 | C                 |\n</code></pre> <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- |\n| C                | A                 |\n| T                | C                 |\n</code></pre> Invalid Examples <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE1 | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- | ----------------- |\n| C                | C                 | A                 |\n| C                | A                 | A                 |\n</code></pre> <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE1 | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- | ----------------- |\n| A                | C                 | A                 |\n| T                | C                 | T                 |\n</code></pre> <pre><code>| REFERENCE_ALLELE | TUMOR_SEQ_ALLELE2 |\n| ---------------- | ----------------- |\n| C                | C                 |\n| T                | C                 |\n</code></pre> <p>See this Genome Nexus issue for more background regarding why this validation rule was implemented.</p> PARAMETER DESCRIPTION <code>df</code> <p>input mutation dataframe</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>str</code> <p>the error message</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/maf/#genie_registry.maf._check_allele_col","title":"<code>_check_allele_col(df, col)</code>","text":"<p>Check the Allele column is correctly formatted.</p> PARAMETER DESCRIPTION <code>df</code> <p>mutation dataframe</p> <p> </p> <code>col</code> <p>Column header name</p> <p> </p> RETURNS DESCRIPTION <p>error, warning</p>"},{"location":"reference/fileformats/mutations_in_cis/","title":"Mutations In Cis","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis","title":"<code>genie_registry.mutationsInCis</code>","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis-classes","title":"Classes","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/mutations_in_cis/#genie_registry.mutationsInCis.mutationsInCis","title":"<code>mutationsInCis</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/patient_retraction/","title":"Patient retraction","text":""},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction","title":"<code>genie_registry.patientRetraction</code>","text":""},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction-classes","title":"Classes","text":""},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction.sampleRetraction","title":"<code>sampleRetraction</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/patient_retraction/#genie_registry.patientRetraction.patientRetraction","title":"<code>patientRetraction</code>","text":"<p>               Bases: <code>sampleRetraction</code></p>"},{"location":"reference/fileformats/sample_retraction/","title":"Sample retraction","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction","title":"<code>genie_registry.sampleRetraction</code>","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction-classes","title":"Classes","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/sample_retraction/#genie_registry.sampleRetraction.sampleRetraction","title":"<code>sampleRetraction</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/seg/","title":"Segmented","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg","title":"<code>genie_registry.seg</code>","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg-classes","title":"Classes","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/seg/#genie_registry.seg.seg","title":"<code>seg</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/structural_variant/","title":"Structural variant","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant","title":"<code>genie_registry.structural_variant</code>","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant-classes","title":"Classes","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/structural_variant/#genie_registry.structural_variant.StructuralVariant","title":"<code>StructuralVariant</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/vcf/","title":"Vcf","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf","title":"<code>genie_registry.vcf</code>","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf-classes","title":"Classes","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.vcf","title":"<code>vcf</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.vcf-functions","title":"Functions","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.vcf.process_steps","title":"<code>process_steps(df)</code>","text":"<p>The processing of vcf files is specific to GENIE, so not included in this function</p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf.vcf.validate_tumor_and_normal_sample_columns","title":"<code>validate_tumor_and_normal_sample_columns(input_df)</code>","text":"<p>Validates that the expected tumor sample column and optional normal sample columns are present in the VCF depending on how many columns you have present in the VCF and they have no missing values</p> Rules <ul> <li>VCFs can only have a max of 11 columns including the 9 required columns</li> <li>For 11 columns VCFs, it is assumed this is a matched tumor normal vcf file     which means there should be a tumor sample and normal sample     column present</li> <li>For 10 column VCFs, it is assumed this is a single sample vcf file     which means there should be a tumor sample column present</li> <li>Anything lower than 10 columns is INVALID because you must have at least a tumor sample column on top of the 9 required VCF columns</li> <li>If tumor sample and/or normal sample columns are present, they must not have any missing values.</li> </ul> VCF with Matched Tumor Normal columns OTHER_VCF_COLUMNS GENIE-GOLD-1-1-tumor GENIE-GOLD-1-1-normal ... ... ... VCFs with Single Sample Column OTHER_VCF_COLUMNS TUMOR ... ... OTHER_VCF_COLUMNS GENIE-GOLD-1-1 ... ... PARAMETER DESCRIPTION <code>input_df</code> <p>input vcf data to be validated</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>str</code> <p>error message</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/fileformats/vcf/#genie_registry.vcf-functions","title":"Functions","text":""},{"location":"reference/fileformats/vcf/#genie_registry.vcf.contains_whitespace","title":"<code>contains_whitespace(row)</code>","text":"<p>Gets the total number of whitespaces from each column of a row</p>"},{"location":"reference/fileformats/workflow/","title":"Workflow","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow","title":"<code>genie_registry.workflow</code>","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow-attributes","title":"Attributes","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow-classes","title":"Classes","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat","title":"<code>FileTypeFormat</code>","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat-functions","title":"Functions","text":""},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.__init__","title":"<code>__init__(syn, center, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>genie_config</code> <p>The configurations needed for the GENIE codebase. GENIE table type/name to Synapse Id. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation. Defaults to None.</p> <p> TYPE: <code>List[List[Entity]]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.read_file","title":"<code>read_file(filePathList)</code>","text":"<p>Each file is to be read in for validation and processing. This is not to be changed in any functions.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths (Max is 2 for the two            clinical files)</p> <p> </p> RETURNS DESCRIPTION <code>df</code> <p>Pandas dataframe of file</p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.validateFilename","title":"<code>validateFilename(filePath)</code>","text":"<p>Validation of file name.  The filename is what maps the file to its validation and processing.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>file type defined by self._fileType</p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.process_steps","title":"<code>process_steps(df, **kwargs)</code>","text":"<p>This function is modified for every single file. It reformats the file and stores the file into database and Synapse.</p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.preprocess","title":"<code>preprocess(newpath)</code>","text":"<p>This is for any preprocessing that has to occur to the entity name to add to kwargs for processing.  entity name is included in the new path</p> PARAMETER DESCRIPTION <code>newpath</code> <p>Path to file</p> <p> </p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.process","title":"<code>process(filePath, **kwargs)</code>","text":"<p>This is the main processing function.</p> PARAMETER DESCRIPTION <code>filePath</code> <p>Path to file</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._process_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>str</code> <p>file path of processed file</p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.FileTypeFormat.validate","title":"<code>validate(filePathList, **kwargs)</code>","text":"<p>This is the main validation function. Every file type calls self._validate, which is different.</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>A list of file paths.</p> <p> </p> <code>kwargs</code> <p>The kwargs are determined by self._validation_kwargs</p> <p> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from validation.</p> <p> TYPE: <code>ValidationResults</code> </p>"},{"location":"reference/fileformats/workflow/#genie_registry.workflow.workflow","title":"<code>workflow</code>","text":"<p>               Bases: <code>FileTypeFormat</code></p>"},{"location":"reference/helper_modules/create_case_lists/","title":"create_case_lists","text":""},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists","title":"<code>genie.create_case_lists</code>","text":"<p>Creates case lists per cancer type</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.CASE_LIST_TEXT_TEMPLATE","title":"<code>CASE_LIST_TEXT_TEMPLATE = 'cancer_study_identifier: {study_id}\\nstable_id: {stable_id}\\ncase_list_name: {case_list_name}\\ncase_list_description: {case_list_description}\\ncase_list_ids: {case_list_ids}'</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists-functions","title":"Functions","text":""},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.create_case_lists_map","title":"<code>create_case_lists_map(clinical_file_name)</code>","text":"<p>Creates the case list dictionary</p> PARAMETER DESCRIPTION <code>clinical_file_name</code> <p>clinical file path</p> <p> </p> RETURNS DESCRIPTION <code>dict</code> <p>key = cancer_type   value = list of sample ids</p> <code>dict</code> <p>key = seq_assay_id   value = list of sample ids</p> <code>list</code> <p>Clinical samples</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists._write_single_oncotree_case_list","title":"<code>_write_single_oncotree_case_list(cancer_type, ids, study_id, output_directory)</code>","text":"<p>Writes one oncotree case list. Python verisons below 3.6 will sort the dictionary keys which causes tests to fail</p> PARAMETER DESCRIPTION <code>cancer_type</code> <p>Oncotree code cancer type</p> <p> </p> <code>ids</code> <p>GENIE sample ids</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p> <code>output_directory</code> <p>case list output directory</p> <p> </p> RETURNS DESCRIPTION <p>case list file path</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.write_case_list_files","title":"<code>write_case_list_files(clinical_file_map, output_directory, study_id)</code>","text":"<p>Writes the cancer_type case list file to case_lists directory</p> PARAMETER DESCRIPTION <code>clinical_file_map</code> <p>cancer type to sample id mapping from                create_case_lists_map</p> <p> </p> <code>output_directory</code> <p>Directory to write case lists</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p> RETURNS DESCRIPTION <code>list</code> <p>oncotree code case list files</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.create_sequenced_samples","title":"<code>create_sequenced_samples(seq_assay_map, assay_info_file_name)</code>","text":"<p>Gets samples sequenced</p> PARAMETER DESCRIPTION <code>seq_assay_map</code> <p>dictionary containing lists of samples per seq_assay_id</p> <p> </p> <code>assay_info_file_name</code> <p>Assay information name</p> <p> </p> RETURNS DESCRIPTION <p>lists of cna and sv samples</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.write_case_list_sequenced","title":"<code>write_case_list_sequenced(clinical_samples, output_directory, study_id)</code>","text":"<p>Writes the genie sequenced and all samples. Since all samples are sequenced, _all and _sequenced are equal</p> PARAMETER DESCRIPTION <code>clinical_samples</code> <p>List of clinical samples</p> <p> </p> <code>output_directory</code> <p>Directory to write case lists</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p> RETURNS DESCRIPTION <code>list</code> <p>case list sequenced and all</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.write_case_list_cna","title":"<code>write_case_list_cna(cna_samples, output_directory, study_id)</code>","text":"<p>Writes the cna sequenced samples</p> PARAMETER DESCRIPTION <code>cna_samples</code> <p>List of cna samples</p> <p> </p> <code>output_directory</code> <p>Directory to write case lists</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p> RETURNS DESCRIPTION <p>cna caselist path</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.write_case_list_sv","title":"<code>write_case_list_sv(samples, output_directory, study_id)</code>","text":"<p>Writes the structural variant (sv) sequenced samples</p> PARAMETER DESCRIPTION <code>samples</code> <p>List of sv samples</p> <p> TYPE: <code>list</code> </p> <code>output_directory (str</code> <p>Directory to write case lists</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>sv caselist path</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.write_case_list_cnaseq","title":"<code>write_case_list_cnaseq(cna_samples, output_directory, study_id)</code>","text":"<p>writes both cna and mutation samples (Just _cna file for now)</p> PARAMETER DESCRIPTION <code>cna_samples</code> <p>List of cna samples</p> <p> </p> <code>output_directory</code> <p>Directory to write case lists</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p> RETURNS DESCRIPTION <p>cnaseq path</p>"},{"location":"reference/helper_modules/create_case_lists/#genie.create_case_lists.main","title":"<code>main(clinical_file_name, assay_info_file_name, output_directory, study_id)</code>","text":"<p>Gets clinical file and gene matrix file and processes it to obtain case list files</p> PARAMETER DESCRIPTION <code>clinical_file_name</code> <p>Clinical file path</p> <p> </p> <code>assay_info_file_name</code> <p>Assay information name</p> <p> </p> <code>output_directory</code> <p>Output directory of case list files</p> <p> </p> <code>study_id</code> <p>cBioPortal study id</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/","title":"dashboard_table_updater","text":""},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater","title":"<code>genie.dashboard_table_updater</code>","text":"<p>Updates dashboard tables</p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater-functions","title":"Functions","text":""},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.get_center_data_completion","title":"<code>get_center_data_completion(center, df)</code>","text":"<p>Gets center data completion.  Calulates the percentile of how complete a clinical data element is: Number of not blank/Unknown/NA divded by total number of patients or samples</p> PARAMETER DESCRIPTION <code>center</code> <p>GENIE center</p> <p> </p> <code>df</code> <p>sample or patient dataframe</p> <p> </p> RETURNS DESCRIPTION <code>Dataframe</code> <p>Center data</p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_samples_in_release_table","title":"<code>update_samples_in_release_table(syn, file_mapping, release, samples_in_release_synid)</code>","text":"<p>Updates the sample in release table This tracks the samples of each release.  1 means it exists, and 0 means it doesn't. For releases without a column in the sample in release table, a new release column will be created for that release.</p> <p>New samples will be displayed on top of old samples (pre-existing samples already in the sample in release table) in the release column.</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>file_mapping</code> <p>file mapping generated from file mapping function</p> <p> TYPE: <code>dict</code> </p> <code>release</code> <p>GENIE release number (ie. 5.3-consortium)</p> <p> TYPE: <code>str</code> </p> <code>samples_in_release_synid</code> <p>Synapse Id of 'samples in release' Table</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_cumulative_sample_table","title":"<code>update_cumulative_sample_table(syn, file_mapping, release, cumulative_sample_count_synid)</code>","text":"<p>Consortium release sample count table update function This gets the cumulative sample count of each file type in each release</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>file_mapping</code> <p>file mapping generated from file mapping function</p> <p> </p> <code>release</code> <p>GENIE release number (ie. 5.3-consortium)</p> <p> </p> <code>cumulative_sample_count_synid</code> <p>Synapse Id of 'Cumulative sample count' Table</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_release_numbers","title":"<code>update_release_numbers(syn, database_mappingdf, release=None)</code>","text":"<p>Updates all release dashboard numbers or specific release number</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p> <code>release</code> <p>GENIE release (ie. 5.3-consortium).  Defaults to None</p> <p> DEFAULT: <code>None</code> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_database_numbers","title":"<code>update_database_numbers(syn, database_mappingdf)</code>","text":"<p>Updates database cumulative numbers (Only called when not staging)</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_oncotree_code_tables","title":"<code>update_oncotree_code_tables(syn, database_mappingdf)</code>","text":"<p>Updates database statistics of oncotree codes and primary onocotree codes</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_sample_difference_table","title":"<code>update_sample_difference_table(syn, database_mappingdf)</code>","text":"<p>Updates sample difference table between consortium releases</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_data_completeness_table","title":"<code>update_data_completeness_table(syn, database_mappingdf)</code>","text":"<p>Updates the data completeness of the database</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_wiki","title":"<code>update_wiki(syn, database_mappingdf)</code>","text":"<p>Updates the GENIE project dashboard wiki timestamp</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.string_to_unix_epoch_time_milliseconds","title":"<code>string_to_unix_epoch_time_milliseconds(string_time)</code>","text":"<p>Takes dates in this format: 2018-10-25T20:16:07.959Z and turns it into unix epoch time in milliseconds</p> PARAMETER DESCRIPTION <code>string_time</code> <p>string in this format: 2018-10-25T20:16:07.959Z</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>int</code> <p>unix epoch time in milliseconds</p> <p> TYPE: <code>int</code> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.update_data_release_file_table","title":"<code>update_data_release_file_table(syn, database_mappingdf)</code>","text":"<p>Updates data release file table</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.check_column_decreases","title":"<code>check_column_decreases(currentdf, olderdf)</code>","text":"<p>Checks entity decreases</p> PARAMETER DESCRIPTION <code>current_ent</code> <p>Current entity dataframe</p> <p> </p> <code>old_ent</code> <p>Older entity dataframe</p> <p> </p> RETURNS DESCRIPTION <p>Differences in values</p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.print_clinical_values_difference_table","title":"<code>print_clinical_values_difference_table(syn, database_mappingdf)</code>","text":"<p>Checks for a decrease in values in the clinical file from last consortium release to most recent consortium release</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.run_dashboard","title":"<code>run_dashboard(syn, database_mappingdf, release, staging=False, public=False)</code>","text":"<p>Runs the dashboard scripts</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>database_mappingdf</code> <p>mapping between synapse ids and database</p> <p> TYPE: <code>DataFrame</code> </p> <code>release</code> <p>GENIE release (ie. 5.3-consortium)</p> <p> TYPE: <code>str</code> </p> <code>public</code> <p>whether to run for public release or not</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>staging</code> <p>whether to run in staging mode or not</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"reference/helper_modules/dashboard_table_updater/#genie.dashboard_table_updater.main","title":"<code>main()</code>","text":""},{"location":"reference/helper_modules/extract/","title":"extract","text":""},{"location":"reference/helper_modules/extract/#genie.extract","title":"<code>genie.extract</code>","text":"<p>This module contains all the functions that extract data from Synapse</p>"},{"location":"reference/helper_modules/extract/#genie.extract-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/extract/#genie.extract.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/extract/#genie.extract.stdout_handler","title":"<code>stdout_handler = logging.StreamHandler(stream=(sys.stdout))</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/extract/#genie.extract-functions","title":"Functions","text":""},{"location":"reference/helper_modules/extract/#genie.extract.get_center_input_files","title":"<code>get_center_input_files(syn, synid, center, process='main', downloadFile=True)</code>","text":"<p>Walks through each center's input directory to get a list of tuples of center files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>synid</code> <p>Synapse Id of a folder</p> <p> TYPE: <code>str</code> </p> <code>center</code> <p>GENIE center name</p> <p> TYPE: <code>str</code> </p> <code>process</code> <p>Process type include \"main\", \"mutation\".                      Defaults to \"main\".</p> <p> TYPE: <code>str</code> DEFAULT: <code>'main'</code> </p> <code>downloadFile</code> <p>Downloads the file. Defaults to True.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list</code> <p>List of Synapse entities</p> <p> TYPE: <code>List[List[Entity]]</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract._map_name_to_filetype","title":"<code>_map_name_to_filetype(name)</code>","text":"<p>Maps file name to filetype</p> PARAMETER DESCRIPTION <code>name</code> <p>File name</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>filetype</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract.get_file_mapping","title":"<code>get_file_mapping(syn, synid)</code>","text":"<p>Get mapping between Synapse entity name and Synapse ids of all entities in a folder</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>synid</code> <p>Synapse Id of folder</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>mapping between Synapse Entity name and Id</p> <p> TYPE: <code>dict</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract.get_public_to_consortium_synid_mapping","title":"<code>get_public_to_consortium_synid_mapping(syn, release_synid)</code>","text":"<p>Gets the mapping between potential public release names and the consortium release folder</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>release_synid</code> <p>Release folder fileview</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>Mapping between potential public release and consortium   release synapse id</p> <p> TYPE: <code>dict</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract.get_syntabledf","title":"<code>get_syntabledf(syn, query_string)</code>","text":"<p>Get dataframe from Synapse Table query</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>query_string</code> <p>Table query</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: Query results in a dataframe</p>"},{"location":"reference/helper_modules/extract/#genie.extract._get_synid_database_mappingdf","title":"<code>_get_synid_database_mappingdf(syn, project_id)</code>","text":"<p>Get database to synapse id mapping dataframe</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>project_id</code> <p>Synapse Project ID with a 'dbMapping' annotation.</p> <p> </p> RETURNS DESCRIPTION <p>database to synapse id mapping dataframe</p>"},{"location":"reference/helper_modules/extract/#genie.extract.getDatabaseSynId","title":"<code>getDatabaseSynId(syn, tableName, project_id=None, databaseToSynIdMappingDf=None)</code>","text":"<p>Get database synapse id from database to synapse id mapping table</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>project_id</code> <p>Synapse Project ID with a database mapping table.</p> <p> DEFAULT: <code>None</code> </p> <code>tableName</code> <p>Name of synapse table</p> <p> </p> <code>databaseToSynIdMappingDf</code> <p>Avoid calling rest call to download table                       if the mapping table is already downloaded</p> <p> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Synapse id of wanted database</p>"},{"location":"reference/helper_modules/extract/#genie.extract._get_database_mapping_config","title":"<code>_get_database_mapping_config(syn, synid)</code>","text":"<p>Gets Synapse database to Table mapping in dict</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>synid</code> <p>Synapse id of database mapping table</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>{'databasename': 'synid'}</p> <p> TYPE: <code>dict</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract.get_genie_config","title":"<code>get_genie_config(syn, project_id)</code>","text":"<p>Get configurations needed for the GENIE codebase</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>project_id</code> <p>Synapse project id</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>GENIE table type/name to Synapse Id</p> <p> TYPE: <code>dict</code> </p>"},{"location":"reference/helper_modules/extract/#genie.extract._get_oncotreelink","title":"<code>_get_oncotreelink(syn, genie_config, oncotree_link=None)</code>","text":"<p>Gets oncotree link unless a link is specified by the user</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>genie_config</code> <p>database name to synid mapping</p> <p> TYPE: <code>dict</code> </p> <code>oncotree_link</code> <p>link to oncotree. Default is None</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>str</code> <p>oncotree link</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/load/","title":"load","text":""},{"location":"reference/helper_modules/load/#genie.load","title":"<code>genie.load</code>","text":"<p>This module contains all the functions that stores data to Synapse</p>"},{"location":"reference/helper_modules/load/#genie.load-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/load/#genie.load.__version__","title":"<code>__version__ = '17.1.0'</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/load/#genie.load.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/load/#genie.load-functions","title":"Functions","text":""},{"location":"reference/helper_modules/load/#genie.load.store_file","title":"<code>store_file(syn, filepath, parentid, name=None, annotations=None, used=None, version_comment=None)</code>","text":"<p>Stores file into Synapse</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>filepath</code> <p>Path to file</p> <p> TYPE: <code>str</code> </p> <code>parentid</code> <p>Synapse Id of a folder or project</p> <p> TYPE: <code>str</code> </p> <code>name</code> <p>Name of entity. Defaults to basename of your file path.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>annotations</code> <p>Synapse annotations to the File Entity. Defaults to None.</p> <p> TYPE: <code>Dict</code> DEFAULT: <code>None</code> </p> <code>used</code> <p>Entities used to generate file. Defaults to None.</p> <p> TYPE: <code>List[str]</code> DEFAULT: <code>None</code> </p> <code>version_comment</code> <p>File Entity version comment. Defaults to None.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>File</code> <p>synapseclient.File: Synapse File entity</p>"},{"location":"reference/helper_modules/load/#genie.load.store_files","title":"<code>store_files(syn, filepaths, parentid)</code>","text":"<p>Stores a list of files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>filepaths</code> <p>List of filepaths</p> <p> TYPE: <code>List[str]</code> </p> <code>parentid</code> <p>Synapse Id of a folder or project</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>List[File]</code> <p>List[synapseclient.File]: List of Synaps File entities</p>"},{"location":"reference/helper_modules/load/#genie.load.store_table","title":"<code>store_table(syn, filepath, tableid)</code>","text":"<p>Stores a tsv to a Synapse Table.  This can append, update, and delete rows in a Synapse table depending on how the tsv file is formatted.</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>filepath</code> <p>Path to a TSV</p> <p> TYPE: <code>str</code> </p> <code>tableid</code> <p>Synapse Id of a Synapse Table</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/load/#genie.load.update_process_trackingdf","title":"<code>update_process_trackingdf(syn, process_trackerdb_synid, center, process_type, start=True)</code>","text":"<p>Updates the processing tracking database</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>process_trackerdb_synid</code> <p>Synapse Id of Process Tracking Table</p> <p> TYPE: <code>str</code> </p> <code>center</code> <p>GENIE center (ie. SAGE)</p> <p> TYPE: <code>str</code> </p> <code>process_type</code> <p>processing type (dbToStage or public)</p> <p> TYPE: <code>str</code> </p> <code>start</code> <p>Start or end of processing.  Default is True for start</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p>"},{"location":"reference/helper_modules/load/#genie.load.update_table","title":"<code>update_table(syn, databaseSynId, newData, filterBy, filterByColumn='CENTER', col=None, toDelete=False)</code>","text":"<p>Update Synapse table given a new dataframe</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>databaseSynId</code> <p>Synapse Id of Synapse Table</p> <p> TYPE: <code>str</code> </p> <code>newData</code> <p>New data in a dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>filterBy</code> <p>Value to filter new data by</p> <p> TYPE: <code>str</code> </p> <code>filterByColumn</code> <p>Column to filter values by. Defaults to \"CENTER\".</p> <p> TYPE: <code>str</code> DEFAULT: <code>'CENTER'</code> </p> <code>col</code> <p>List of columns to ingest. Defaults to None.</p> <p> TYPE: <code>List[str]</code> DEFAULT: <code>None</code> </p> <code>toDelete</code> <p>Delete rows given the primary key. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"reference/helper_modules/load/#genie.load._update_table","title":"<code>_update_table(syn, database, new_dataset, database_synid, primary_key_cols, to_delete=False)</code>","text":"<p>A helper function to compare new dataset with existing data, and store any changes that need to be made to the database</p>"},{"location":"reference/helper_modules/load/#genie.load._get_col_order","title":"<code>_get_col_order(orig_database_cols)</code>","text":"<p>Get column order</p> PARAMETER DESCRIPTION <code>orig_database_cols</code> <p>A list of column names of the original database</p> <p> TYPE: <code>Index</code> </p> RETURNS DESCRIPTION <code>List[str]</code> <p>The list of re-ordered column names</p>"},{"location":"reference/helper_modules/load/#genie.load._reorder_new_dataset","title":"<code>_reorder_new_dataset(orig_database_cols, new_dataset)</code>","text":"<p>Reorder new dataset based on the original database</p> PARAMETER DESCRIPTION <code>orig_database_cols</code> <p>A list of column names of the original database</p> <p> TYPE: <code>Index</code> </p> <code>new_dataset</code> <p>New Data</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>The re-ordered new dataset</p>"},{"location":"reference/helper_modules/load/#genie.load._generate_primary_key","title":"<code>_generate_primary_key(dataset, primary_key_cols, primary_key)</code>","text":"<p>Generate primary key column a dataframe</p> PARAMETER DESCRIPTION <code>dataset</code> <p>A dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>primary_key_cols</code> <p>Column(s) that make up the primary key</p> <p> TYPE: <code>List[str]</code> </p> <code>primary_key</code> <p>The column name of the primary_key</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: The dataframe with primary_key column added</p>"},{"location":"reference/helper_modules/load/#genie.load.check_database_changes","title":"<code>check_database_changes(database, new_dataset, primary_key_cols, to_delete=False)</code>","text":"<p>Check changes that need to be made, i.e. append/update/delete rows to the database based on its comparison with new data</p> PARAMETER DESCRIPTION <code>database</code> <p>Original Data</p> <p> TYPE: <code>DataFrame</code> </p> <code>new_dataset</code> <p>New Data</p> <p> TYPE: <code>DataFrame</code> </p> <code>primary_key_cols</code> <p>Column(s) that make up the primary key</p> <p> TYPE: <code>list</code> </p> <code>to_delete</code> <p>Delete rows. Defaults to False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"reference/helper_modules/load/#genie.load.store_database","title":"<code>store_database(syn, database_synid, col_order, all_updates, to_delete_rows)</code>","text":"<p>Store changes to the database</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>database_synid</code> <p>Synapse Id of the Synapse table</p> <p> TYPE: <code>str</code> </p> <code>col_order</code> <p>The ordered column names to be saved</p> <p> TYPE: <code>List[str]</code> </p> <code>all_updates</code> <p>rows to be appended and/or updated</p> <p> TYPE: <code>DataFrame</code> </p> <code>to_deleted_rows</code> <p>rows to be deleted</p> <p> TYPE: <code>DataFrame</code> </p>"},{"location":"reference/helper_modules/load/#genie.load._copyRecursive","title":"<code>_copyRecursive(syn, entity, destinationId, mapping=None, skipCopyAnnotations=False, **kwargs)</code>","text":"<p>NOTE: This is a copy of the function found here: https://github.com/Sage-Bionetworks/synapsePythonClient/blob/develop/synapseutils/copy_functions.py#L409 This was copied because there is a restriction that doesn't allow for copying entities with access requirements</p> <p>Recursively copies synapse entites, but does not copy the wikis</p> PARAMETER DESCRIPTION <code>syn</code> <p>A Synapse object with user's login</p> <p> TYPE: <code>Synapse</code> </p> <code>entity</code> <p>A synapse entity ID</p> <p> TYPE: <code>str</code> </p> <code>destinationId</code> <p>Synapse ID of a folder/project that the copied entity is being copied to</p> <p> TYPE: <code>str</code> </p> <code>mapping</code> <p>A mapping of the old entities to the new entities</p> <p> TYPE: <code>Dict[str, str]</code> DEFAULT: <code>None</code> </p> <code>skipCopyAnnotations</code> <p>Skips copying the annotations                     Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>Dict[str, str]</code> <p>a mapping between the original and copied entity: {'syn1234':'syn33455'}</p>"},{"location":"reference/helper_modules/process_functions/","title":"process_functions","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions","title":"<code>genie.process_functions</code>","text":"<p>Processing functions that are used in the GENIE pipeline</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.__version__","title":"<code>__version__ = '17.1.0'</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.SCRIPT_DIR","title":"<code>SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions-functions","title":"Functions","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.to_unix_epoch_time_utc","title":"<code>to_unix_epoch_time_utc(dt)</code>","text":"<p>Wrapper for Synapse to_unix_epoch_time that forces UTC tzinfo</p> PARAMETER DESCRIPTION <code>dt</code> <p>input datetime time object</p> <p> TYPE: <code>Union[date, datetime, str]</code> </p> RETURNS DESCRIPTION <code>int</code> <p>Converted UTC datetime object to UNIX time</p> <p> TYPE: <code>int</code> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_clinical_dataframe","title":"<code>get_clinical_dataframe(filePathList)</code>","text":"<p>Gets the clinical file(s) and reads them in as a dataframe</p> PARAMETER DESCRIPTION <code>filePathList</code> <p>List of clinical files</p> <p> TYPE: <code>list</code> </p> RAISES DESCRIPTION <code>ValueError</code> <p>when PATIENT_ID column doesn't exist</p> <code>ValueError</code> <p>When PATIENT_IDs in sample file doesn't exist in patient file</p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: clinical file as a dataframe</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_assay_dataframe","title":"<code>get_assay_dataframe(filepath_list)</code>","text":"<p>Reads in assay_information.yaml file     and outputs it as a dataframe</p> PARAMETER DESCRIPTION <code>filepath_list</code> <p>list of files</p> <p> TYPE: <code>list</code> </p> RAISES DESCRIPTION <code>ValueError</code> <p>thrown if read error with file</p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: dataframe version of assay info file</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.retry_get_url","title":"<code>retry_get_url(url)</code>","text":"<p>Implement retry logic when getting urls. Timesout at 3 seconds, retries 5 times.</p> PARAMETER DESCRIPTION <code>url</code> <p>Http or https url</p> <p> </p> RETURNS DESCRIPTION <p>requests.get()</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.checkUrl","title":"<code>checkUrl(url)</code>","text":"<p>Check if URL link is live</p> PARAMETER DESCRIPTION <code>url</code> <p>web URL</p> <p> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.checkColExist","title":"<code>checkColExist(DF, key)</code>","text":"<p>This function checks if the column(s) exist(s) in a dataframe</p> PARAMETER DESCRIPTION <code>DF</code> <p>pandas dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>key</code> <p>Expected column header name(s)</p> <p> TYPE: <code>Union[str, int, list]</code> </p> RETURNS DESCRIPTION <code>bool</code> <p>True if column(s) exist(s)</p> <p> TYPE: <code>bool</code> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.validate_genie_identifier","title":"<code>validate_genie_identifier(identifiers, center, filename, col)</code>","text":"<p>Validate GENIE sample and patient ids.</p> PARAMETER DESCRIPTION <code>identifiers</code> <p>Array of GENIE identifiers</p> <p> TYPE: <code>Series</code> </p> <code>center</code> <p>GENIE center name</p> <p> TYPE: <code>str</code> </p> <code>filename</code> <p>name of file</p> <p> TYPE: <code>str</code> </p> <code>col</code> <p>Column with identifiers</p> <p> TYPE: <code>str</code> </p> return <p>str: Errors</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.lookup_dataframe_value","title":"<code>lookup_dataframe_value(df, col, query)</code>","text":"<p>Look up dataframe value given query and column</p> PARAMETER DESCRIPTION <code>df</code> <p>dataframe</p> <p> </p> <code>col</code> <p>column with value to return</p> <p> </p> <code>query</code> <p>Query for specific column</p> <p> </p> RETURNS DESCRIPTION <p>value</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.rmFiles","title":"<code>rmFiles(folderPath, recursive=True)</code>","text":"<p>Convenience function to remove all files in dir</p> PARAMETER DESCRIPTION <code>folderPath</code> <p>Path to folder</p> <p> </p> <code>recursive</code> <p>Removes all files recursively</p> <p> DEFAULT: <code>True</code> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.removeStringFloat","title":"<code>removeStringFloat(string)</code>","text":"<p>remove string float in tsv file</p> PARAMETER DESCRIPTION <code>string</code> <p>tsv file in string format</p> <p> </p> Return <p>string: string with float removed</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.removePandasDfFloat","title":"<code>removePandasDfFloat(df, header=True)</code>","text":"<p>Remove decimal for integers due to pandas</p> PARAMETER DESCRIPTION <code>df</code> <p>Pandas dataframe</p> <p> </p> Return <p>str: tsv in text</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.removeFloat","title":"<code>removeFloat(df)</code>","text":"<p>Need to remove this function as it calls another function</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.checkGenieId","title":"<code>checkGenieId(ID, center)</code>","text":"<p>Checks if GENIE ID is labelled correctly and reformats the GENIE ID</p> PARAMETER DESCRIPTION <code>ID</code> <p>string</p> <p> </p> <code>center</code> <p>GENIE center</p> <p> </p> Return <p>str: Formatted GENIE ID string</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.seqDateFilter","title":"<code>seqDateFilter(clinicalDf, processingDate, days)</code>","text":"<p>SEQ_DATE filter SEQ_DATE - Clinical data (6 and 12 as parameters) Jan-2017 , given processing date (today) -&gt;     staging release (processing date - Jan-2017 &lt; 6 months) July-2016 , given processing date (today) -&gt;     consortium release (processing date - July-2016 between     6 months - 12 months)</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.addClinicalHeaders","title":"<code>addClinicalHeaders(clinicalDf, mapping, patientCols, sampleCols, samplePath, patientPath)</code>","text":"<p>Add clinical file headers</p> PARAMETER DESCRIPTION <code>clinicalDf</code> <p>clinical dataframe</p> <p> </p> <code>mapping</code> <p>mapping dataframe, maps clinical columns to      labels and descriptions</p> <p> </p> <code>patientCols</code> <p>list of patient columns</p> <p> </p> <code>sampleCols</code> <p>list of sample columns</p> <p> </p> <code>samplePath</code> <p>clinical sample path</p> <p> </p> <code>patientPath</code> <p>clinical patient path</p> <p> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._check_valid_df","title":"<code>_check_valid_df(df, col)</code>","text":"<p>Checking if variable is a pandas dataframe and column specified exist</p> PARAMETER DESCRIPTION <code>df</code> <p>Pandas dataframe</p> <p> </p> <code>col</code> <p>Column name</p> <p> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._get_left_diff_df","title":"<code>_get_left_diff_df(left, right, checkby)</code>","text":"<p>Subset the dataframe based on 'checkby' by taking values in the left df that arent in the right df</p> PARAMETER DESCRIPTION <code>left</code> <p>Dataframe</p> <p> </p> <code>right</code> <p>Dataframe</p> <p> </p> <code>checkby</code> <p>Column of values to compare</p> <p> </p> Return <p>Dataframe: Subset of dataframe from left that don't exist in the right</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._get_left_union_df","title":"<code>_get_left_union_df(left, right, checkby)</code>","text":"<p>Subset the dataframe based on 'checkby' by taking the union of values in the left df with the right df</p> PARAMETER DESCRIPTION <code>left</code> <p>Dataframe</p> <p> </p> <code>right</code> <p>Dataframe</p> <p> </p> <code>checkby</code> <p>Column of values to compare</p> <p> </p> Return <p>Dataframe: Subset of dataframe from left that also exist in the right</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._append_rows","title":"<code>_append_rows(new_datasetdf, databasedf, checkby)</code>","text":"<p>Compares the dataset from the database and determines which rows to append from the dataset</p> PARAMETER DESCRIPTION <code>new_datasetdf</code> <p>Input data dataframe</p> <p> </p> <code>databasedf</code> <p>Existing data dataframe</p> <p> </p> <code>checkby</code> <p>Column of values to compare</p> <p> </p> Return <p>Dataframe: Dataframe of rows to append</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._delete_rows","title":"<code>_delete_rows(new_datasetdf, databasedf, checkby)</code>","text":"<p>Compares the dataset from the database and determines which rows to delete from the dataset</p> PARAMETER DESCRIPTION <code>new_datasetdf</code> <p>Input data dataframe</p> <p> </p> <code>databasedf</code> <p>Existing data dataframe</p> <p> </p> <code>checkby</code> <p>Column of values to compare</p> <p> </p> Return <p>Dataframe: Dataframe of rows to delete</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._create_update_rowsdf","title":"<code>_create_update_rowsdf(updating_databasedf, updatesetdf, rowids, differentrows)</code>","text":"<p>Create the update dataset dataframe</p> PARAMETER DESCRIPTION <code>updating_databasedf</code> <p>Update database dataframe</p> <p> </p> <code>updatesetdf</code> <p>Update dataset dataframe</p> <p> </p> <code>rowids</code> <p>rowids of the database (Synapse ROW_ID, ROW_VERSION)</p> <p> </p> <code>differentrows</code> <p>vector of booleans for rows that need to be updated            True for update, False for not</p> <p> </p> RETURNS DESCRIPTION <code>dataframe</code> <p>Update dataframe</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._update_rows","title":"<code>_update_rows(new_datasetdf, databasedf, checkby)</code>","text":"<p>Compares the dataset from the database and determines which rows to update from the dataset</p> PARAMETER DESCRIPTION <code>new_datasetdf</code> <p>Input data dataframe</p> <p> </p> <code>databasedf</code> <p>Existing data dataframe</p> <p> </p> <code>checkby</code> <p>Column of values to compare</p> <p> </p> Return <p>Dataframe: Dataframe of rows to update</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.checkInt","title":"<code>checkInt(element)</code>","text":"<p>Check if an item can become an integer</p> PARAMETER DESCRIPTION <code>element</code> <p>Any variable and type</p> <p> </p> RETURNS DESCRIPTION <code>boolean</code> <p>True/False</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.check_col_and_values","title":"<code>check_col_and_values(df, col, possible_values, filename, na_allowed=False, required=False, sep=None)</code>","text":"<p>This function checks if the column exists then checks if the values in the column have the correct values</p> PARAMETER DESCRIPTION <code>df</code> <p>Input dataframe</p> <p> </p> <code>col</code> <p>Expected column name</p> <p> </p> <code>possible_values</code> <p>list of possible values</p> <p> </p> <code>filename</code> <p>Name of file</p> <p> </p> <code>required</code> <p>If the column is required.  Default is False</p> <p> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>warning, error</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.extract_oncotree_code_mappings_from_oncotree_json","title":"<code>extract_oncotree_code_mappings_from_oncotree_json(oncotree_json, primary, secondary)</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_oncotree_code_mappings","title":"<code>get_oncotree_code_mappings(oncotree_tumortype_api_endpoint_url)</code>","text":"<p>CREATE ONCOTREE DICTIONARY MAPPING TO PRIMARY, SECONDARY, CANCER TYPE, AND CANCER DESCRIPTION</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.getCODE","title":"<code>getCODE(mapping, key, useDescription=False)</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.getPrimary","title":"<code>getPrimary(code, oncotreeDict, primary)</code>","text":""},{"location":"reference/helper_modules/process_functions/#genie.process_functions.synapse_login","title":"<code>synapse_login(debug=False)</code>","text":"<p>Logs into Synapse if credentials are saved. If not saved, then user is prompted username and auth token.</p> PARAMETER DESCRIPTION <code>debug</code> <p>Synapse debug feature. Defaults to False</p> <p> TYPE: <code>Optional[bool]</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>Synapse</code> <p>Synapseclient object</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_gdc_data_dictionary","title":"<code>get_gdc_data_dictionary(filetype)</code>","text":"<p>Use the GDC API to get the values allowed for columns of different filetypes (ie. disease_type in the case file)</p> PARAMETER DESCRIPTION <code>filetype</code> <p>GDC file type (ie. case, read_group)</p> <p> </p> Return <p>json:  Dictionary of allowed columns for the filetype and        allowed values for those columns</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._create_schema","title":"<code>_create_schema(syn, table_name, parentid, columns=None, annotations=None)</code>","text":"<p>Creates Table Schema</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>table_name</code> <p>Name of table</p> <p> </p> <code>parentid</code> <p>Project synapse id</p> <p> </p> <code>columns</code> <p>Columns of Table</p> <p> DEFAULT: <code>None</code> </p> <code>annotations</code> <p>Dictionary of annotations to add</p> <p> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <p>Schema</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._update_database_mapping","title":"<code>_update_database_mapping(syn, database_synid_mappingdf, database_mapping_synid, fileformat, new_tableid)</code>","text":"<p>Updates database to synapse id mapping table</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>database_synid_mappingdf</code> <p>Database to synapse id mapping dataframe</p> <p> </p> <code>database_mapping_synid</code> <p>Database to synapse id table id</p> <p> </p> <code>fileformat</code> <p>File format updated</p> <p> </p> <code>new_tableid</code> <p>New file format table id</p> <p> </p> RETURNS DESCRIPTION <p>Updated Table object</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions._move_entity","title":"<code>_move_entity(syn, ent, parentid, name=None)</code>","text":"<p>Moves an entity (works like linux mv)</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>ent</code> <p>Synapse Entity</p> <p> </p> <code>parentid</code> <p>Synapse Project id</p> <p> </p> <code>name</code> <p>New Entity name if a new name is desired</p> <p> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <p>Moved Entity</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_dbmapping","title":"<code>get_dbmapping(syn, projectid)</code>","text":"<p>Gets database mapping information</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>projectid</code> <p>Project id where new data lives</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>{'synid': database mapping syn id, 'df': database mapping pd.DataFrame}</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.create_new_fileformat_table","title":"<code>create_new_fileformat_table(syn, file_format, newdb_name, projectid, archive_projectid)</code>","text":"<p>Creates new database table based on old database table and archives old database table</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>file_format</code> <p>File format to update</p> <p> TYPE: <code>str</code> </p> <code>newdb_name</code> <p>Name of new database table</p> <p> TYPE: <code>str</code> </p> <code>projectid</code> <p>Project id where new database should live</p> <p> TYPE: <code>str</code> </p> <code>archive_projectid</code> <p>Project id where old database should be moved</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>{\"newdb_ent\": New database synapseclient.Table, \"newdb_mappingdf\": new databse pd.DataFrame, \"moved_ent\": old database synpaseclient.Table}</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.create_missing_columns","title":"<code>create_missing_columns(dataset, schema)</code>","text":"<p>Creates and fills missing columns with the relevant NA value for the     given data type. Note that special handling had to occur for     allowing NAs in integer based columns in pandas by converting     the integer column into the Int64 (pandas nullable integer data type)</p> PARAMETER DESCRIPTION <code>dataset</code> <p>input dataset to fill missing columns for</p> <p> TYPE: <code>DataFrame</code> </p> <code>schema</code> <p>the expected schema {column_name(str): data_type(str)} for the input dataset</p> <p> TYPE: <code>dict</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pd.Series: updated dataset</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.check_values_in_column","title":"<code>check_values_in_column(df, col, values)</code>","text":"<p>Check if a column in a dataframe contains specific values Args:     df (pd.DataFrame): The clinical dataframe     col (str): The column name     values (list): Expected values in the column Returns:     bool: True if the column contains the specified values</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_row_indices_for_invalid_column_values","title":"<code>get_row_indices_for_invalid_column_values(df, col, possible_values, na_allowed=False, sep=None)</code>","text":"<p>This function checks the column values against possible_values and returns row indices of invalid rows.</p> PARAMETER DESCRIPTION <code>df</code> <p>Input dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>col</code> <p>The column to be checked</p> <p> TYPE: <code>str</code> </p> <code>possible_values</code> <p>The list of possible values</p> <p> TYPE: <code>list</code> </p> <code>na_allowed</code> <p>If NA is allowed. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>sep</code> <p>The string separator. Defaults to None.</p> <p> TYPE: <code>Optional[str]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Index</code> <p>pd.Index: The row indices of the rows with values that are not in possible_values.</p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.get_message_for_invalid_column_value","title":"<code>get_message_for_invalid_column_value(col, filename, invalid_indices, possible_values)</code>","text":"<p>This function returns the error and warning messages if the target column has rows with invalid values.</p> PARAMETER DESCRIPTION <code>col</code> <p>The column to be checked</p> <p> TYPE: <code>str</code> </p> <code>filename</code> <p>The file name</p> <p> TYPE: <code>str</code> </p> <code>invalid_indices</code> <p>The row indices of the rows with invalid values</p> <p> TYPE: <code>Index</code> </p> <code>possible_values</code> <p>The list of possible values</p> <p> TYPE: <code>list</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>warning, error</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.check_column_and_values_row_specific","title":"<code>check_column_and_values_row_specific(df, col, possible_values, filename, na_allowed=False, required=False, sep=None)</code>","text":"<p>This function checks if the column exists and checks if the values in the column have the valid values.    Currently, this function is only used in assay.py</p> PARAMETER DESCRIPTION <code>df</code> <p>Input dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>col</code> <p>The column to be checked</p> <p> TYPE: <code>str</code> </p> <code>possible_values</code> <p>The list of possible values</p> <p> TYPE: <code>list</code> </p> <code>filename</code> <p>The file name</p> <p> TYPE: <code>str</code> </p> <code>na_allowed</code> <p>If NA is allowed. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>required</code> <p>If the column is required. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>sep</code> <p>The string separator. Defaults to None.</p> <p> TYPE: <code>Optional[str]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>warning, error</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/helper_modules/process_functions/#genie.process_functions.add_columns_to_data_gene_matrix","title":"<code>add_columns_to_data_gene_matrix(data_gene_matrix, sample_list, column_name)</code>","text":"<p>Add  CNA and SV columns to data gene matrix</p> PARAMETER DESCRIPTION <code>data_gene_matrix</code> <p>data gene matrix</p> <p> TYPE: <code>DataFrame</code> </p> <code>sample_list</code> <p>The list of cna or sv samples</p> <p> TYPE: <code>list</code> </p> <code>column_name</code> <p>The column name to be added</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/transform/","title":"transform","text":""},{"location":"reference/helper_modules/transform/#genie.transform","title":"<code>genie.transform</code>","text":"<p>This module contains all the transformation functions used throughout the GENIE package</p>"},{"location":"reference/helper_modules/transform/#genie.transform-functions","title":"Functions","text":""},{"location":"reference/helper_modules/transform/#genie.transform._col_name_to_titlecase","title":"<code>_col_name_to_titlecase(string)</code>","text":"<p>Convert strings to titlecase. Supports strings separated by _.</p> PARAMETER DESCRIPTION <code>string</code> <p>A string</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>A string converted to title case</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/transform/#genie.transform._convert_col_with_nas_to_str","title":"<code>_convert_col_with_nas_to_str(df, col)</code>","text":"<p>This converts a column into str while preserving NAs</p>"},{"location":"reference/helper_modules/transform/#genie.transform._convert_float_col_with_nas_to_int","title":"<code>_convert_float_col_with_nas_to_int(df, col)</code>","text":"<p>This converts int column that was turned into a float col because pandas does that with int values that have NAs back into an int col with NAs intact</p>"},{"location":"reference/helper_modules/transform/#genie.transform._convert_df_with_mixed_dtypes","title":"<code>_convert_df_with_mixed_dtypes(read_csv_params)</code>","text":"<p>This checks if a dataframe read in normally comes out with mixed data types (which happens when low_memory = True because read_csv parses in chunks and guesses dtypes by chunk) and converts a dataframe with mixed datatypes to one datatype.</p> PARAMETER DESCRIPTION <code>read_csv_params</code> <p>of input params and values to pandas's read_csv function. needs to include filepath to dataset to be read in</p> <p> TYPE: <code>dict</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame : The dataset read in</p>"},{"location":"reference/helper_modules/transform/#genie.transform._convert_values_to_na","title":"<code>_convert_values_to_na(input_df, values_to_replace, columns_to_convert)</code>","text":"<p>Converts given values to NA in an input dataset</p> PARAMETER DESCRIPTION <code>input_df</code> <p>input dataset</p> <p> TYPE: <code>DataFrame</code> </p> <code>values_to_replace</code> <p>string values to replace with na</p> <p> TYPE: <code>List[str]</code> </p> <code>columns_to_convert</code> <p>subset of columns to convert with na in</p> <p> TYPE: <code>List[str]</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: dataset with specified values replaced with NAs</p>"},{"location":"reference/helper_modules/validate/","title":"Validate","text":""},{"location":"reference/helper_modules/validate/#genie.validate","title":"<code>genie.validate</code>","text":""},{"location":"reference/helper_modules/validate/#genie.validate-attributes","title":"Attributes","text":""},{"location":"reference/helper_modules/validate/#genie.validate.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/validate/#genie.validate.ACCEPTED_CHROMOSOMES","title":"<code>ACCEPTED_CHROMOSOMES = list(map(str, range(1, 23))) + ['X', 'Y', 'MT']</code>  <code>module-attribute</code>","text":""},{"location":"reference/helper_modules/validate/#genie.validate-classes","title":"Classes","text":""},{"location":"reference/helper_modules/validate/#genie.validate.ValidationHelper","title":"<code>ValidationHelper</code>","text":"<p>               Bases: <code>object</code></p>"},{"location":"reference/helper_modules/validate/#genie.validate.ValidationHelper-functions","title":"Functions","text":""},{"location":"reference/helper_modules/validate/#genie.validate.ValidationHelper.__init__","title":"<code>__init__(syn, project_id, center, entitylist, format_registry=None, file_type=None, genie_config=None, ancillary_files=None)</code>","text":"<p>A validator helper class for a center's files.</p> PARAMETER DESCRIPTION <code>syn</code> <p>a synapseclient.Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>project_id</code> <p>Synapse Project ID where files are stored and configured.</p> <p> TYPE: <code>str</code> </p> <code>center</code> <p>The participating center name.</p> <p> TYPE: <code>str</code> </p> <code>entitylist</code> <p>a list of file paths.</p> <p> TYPE: <code>List[File]</code> </p> <code>format_registry</code> <p>A dictionary mapping file format name to the              format class.</p> <p> TYPE: <code>Optional[Dict]</code> DEFAULT: <code>None</code> </p> <code>file_type</code> <p>Specify file type to skip filename validation</p> <p> TYPE: <code>Optional[str]</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation</p> <p> TYPE: <code>Optional[list]</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/helper_modules/validate/#genie.validate.ValidationHelper.determine_filetype","title":"<code>determine_filetype()</code>","text":"<p>Gets the file type of the file by validating its filename</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>filepathlist</code> <p>list of filepaths to center files</p> <p> </p> RETURNS DESCRIPTION <code>str</code> <p>File type of input files.  None if no filetype found</p>"},{"location":"reference/helper_modules/validate/#genie.validate.ValidationHelper.validate_single_file","title":"<code>validate_single_file(**kwargs)</code>","text":"<p>Validate a submitted file unit.</p> RETURNS DESCRIPTION <code>message</code> <p>errors and warnings</p> <code>valid</code> <p>Boolean value of validation status</p>"},{"location":"reference/helper_modules/validate/#genie.validate.GenieValidationHelper","title":"<code>GenieValidationHelper</code>","text":"<p>               Bases: <code>ValidationHelper</code></p> <p>A validator helper class for AACR Project Genie.</p>"},{"location":"reference/helper_modules/validate/#genie.validate-functions","title":"Functions","text":""},{"location":"reference/helper_modules/validate/#genie.validate._check_parentid_permission_container","title":"<code>_check_parentid_permission_container(syn, parentid)</code>","text":"<p>Checks permission / container</p>"},{"location":"reference/helper_modules/validate/#genie.validate._check_center_input","title":"<code>_check_center_input(center, center_list)</code>","text":"<p>Checks center input</p> PARAMETER DESCRIPTION <code>center</code> <p>Center name</p> <p> </p> <code>center_list</code> <p>List of allowed centers</p> <p> </p> RAISES DESCRIPTION <code>ValueError</code> <p>If specify a center not part of the center list</p>"},{"location":"reference/helper_modules/validate/#genie.validate._validate_chromosome","title":"<code>_validate_chromosome(df, col, fileformat, allow_chr=True, allow_na=False)</code>","text":"<p>Validate chromosome values</p> PARAMETER DESCRIPTION <code>df</code> <p>Dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>col</code> <p>Column header for column containing chromosome values</p> <p> TYPE: <code>str</code> </p> <code>fileformat</code> <p>GENIE supported file format</p> <p> TYPE: <code>str</code> </p> <code>allow_chr</code> <p>whether the chr prefix is allowed in the values</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>allow_na</code> <p>whether NA/blanks are allowed in the values</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>errors and warnings</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/helper_modules/validate/#genie.validate._perform_validate","title":"<code>_perform_validate(syn, args)</code>","text":"<p>This is the main entry point to the genie command line tool.</p>"},{"location":"reference/helper_modules/validate/#genie.validate.parse_file_info_in_nested_list","title":"<code>parse_file_info_in_nested_list(nested_list, search_str, ignore_case=False, allow_underscore=False)</code>","text":"<p>TODO: To refactor/remove once clinical file structure gets updated to be non-nested</p> <p>Parses for a name and filepath in a nested list of Synapse entity objects</p> PARAMETER DESCRIPTION <code>nested_list</code> <p>description</p> <p> TYPE: <code>list[list]</code> </p> <code>search_str</code> <p>the substring to look for in the files</p> <p> TYPE: <code>str</code> </p> <code>ignore_case</code> <p>whether to perform case-insensitive comparison.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>allow_underscore</code> <p>whether to treat underscores as equivalent to dashes.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>dict[dict]: files found, name(s) and filepath(s) of the file(s) found</p>"},{"location":"reference/helper_modules/validate/#genie.validate.check_values_between_two_df","title":"<code>check_values_between_two_df(df1, df1_filename, df1_id_to_check, df2, df2_filename, df2_id_to_check, ignore_case=False, allow_underscore=False)</code>","text":"<p>Check that all the identifier(s) (ids) in one file (df1) exists in the other file (df1)</p> PARAMETER DESCRIPTION <code>df1</code> <p>file to use as base of check</p> <p> TYPE: <code>DataFrame</code> </p> <code>df1_filename</code> <p>filename of file to use as base of check</p> <p> TYPE: <code>str</code> </p> <code>df1_id_to_check</code> <p>name of column to check values for in df1</p> <p> TYPE: <code>str</code> </p> <code>df2</code> <p>file to cross-validate against</p> <p> TYPE: <code>DataFrame</code> </p> <code>df2_filename</code> <p>filename of file to cross-validate against</p> <p> TYPE: <code>str</code> </p> <code>df2_id_to_check</code> <p>name of column to check values for in df2</p> <p> TYPE: <code>str</code> </p> <code>ignore_case</code> <p>whether to perform case-insensitive comparison.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>allow_underscore</code> <p>whether to treat underscores as equivalent to dashes.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings as a file from cross-validation.    Defaults to blank strings</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/helper_modules/validate/#genie.validate.check_variant_start_and_end_positions","title":"<code>check_variant_start_and_end_positions(input_df, start_pos_col, end_pos_col, filename)</code>","text":"<p>Checks that a variant's start position is less than its     end position</p> PARAMETER DESCRIPTION <code>input_df</code> <p>Input data to check positions</p> <p> TYPE: <code>DataFrame</code> </p> <code>start_pos_col</code> <p>Name of the start position column</p> <p> TYPE: <code>str</code> </p> <code>end_pos_col</code> <p>Name of the end position column</p> <p> TYPE: <code>str</code> </p> <code>filename</code> <p>Name of the file</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings from the position validation    Defaults to blank strings</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/helper_modules/validate/#genie.validate.standardize_string_for_validation","title":"<code>standardize_string_for_validation(input_string, ignore_case=False, allow_underscore=False)</code>","text":"<p>This standardizes a string to prep it for further validation purposes     e.g: string comparison</p> PARAMETER DESCRIPTION <code>input_string</code> <p>input string to standardize</p> <p> TYPE: <code>str</code> </p> <code>ignore_case</code> <p>Lowercases the string perform case-insensitive comparison. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>allow_underscore</code> <p>Treats underscores as equivalent to dashes. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>str</code> <p>standardized string</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/helper_modules/validate/#genie.validate.get_invalid_allele_rows","title":"<code>get_invalid_allele_rows(input_data, input_col, allowed_comb_alleles, allowed_ind_alleles, ignore_case=False, allow_na=False)</code>","text":"<p>Find invalid indices in a DataFrame column based on allowed allele values.</p> PARAMETER DESCRIPTION <code>input_data</code> <p>The DataFrame to search.</p> <p> TYPE: <code>DataFrame</code> </p> <code>input_col</code> <p>The name of the column to check.</p> <p> TYPE: <code>str</code> </p> <code>allowed_comb_alleles</code> <p>The list of allowed allele values (can appear in combinations or individually)</p> <p> TYPE: <code>list</code> </p> <code>allowed_ind_alleles</code> <p>The list of allowed allele values (can only appear individually)</p> <p> TYPE: <code>list</code> </p> <code>ignore_case</code> <p>whether to perform case-insensitive matching</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>allow_na</code> <p>whether to allow NAs to be an allowed allele value or not.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <p>Returns:     pd.Index: A pandas index object indicating the row indices that     don't match the allowed alleles</p>"},{"location":"reference/helper_modules/validate/#genie.validate.get_allele_validation_message","title":"<code>get_allele_validation_message(invalid_indices, invalid_col, allowed_comb_alleles, allowed_ind_alleles, fileformat)</code>","text":"<p>Creates the error/warning message for the check for invalid alleles</p> PARAMETER DESCRIPTION <code>invalid_indices</code> <p>the row indices that have invalid alleles</p> <p> TYPE: <code>Series</code> </p> <code>invalid_col</code> <p>The column with the invalid values</p> <p> TYPE: <code>str</code> </p> <code>allowed_comb_alleles</code> <p>The list of allowed allele values (can appear in combinations or individually)</p> <p> TYPE: <code>list</code> </p> <code>allowed_ind_alleles</code> <p>The list of allowed allele values (can only appear individually)</p> <p> TYPE: <code>list</code> </p> <code>fileformat</code> <p>Name of the fileformat</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>The errors and warnings from the allele validation    Defaults to blank strings</p> <p> TYPE: <code>tuple</code> </p>"},{"location":"reference/main_pipeline_commands/consortium_to_public/","title":"Consortium to Public","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public","title":"<code>bin.consortium_to_public</code>","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.PWD","title":"<code>PWD = os.path.dirname(os.path.abspath(__file__))</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.parser","title":"<code>parser = argparse.ArgumentParser()</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.args","title":"<code>args = parser.parse_args()</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.generate_dashboard_html","title":"<code>generate_dashboard_html(genie_version, staging=False, testing=False)</code>","text":"<p>Generates dashboard html writeout that gets uploaded to the release folder</p> PARAMETER DESCRIPTION <code>genie_version</code> <p>GENIE release</p> <p> TYPE: <code>str</code> </p> <code>staging</code> <p>Use staging files. Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>testing</code> <p>Use testing files. Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.generate_data_guide","title":"<code>generate_data_guide(genie_version, oncotree_version=None, database_mapping=None)</code>","text":"<p>Generates the GENIE data guide</p>"},{"location":"reference/main_pipeline_commands/consortium_to_public/#bin.consortium_to_public.main","title":"<code>main(args)</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/","title":"Database to Staging","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging","title":"<code>bin.database_to_staging</code>","text":"<p>Workflow to trigger a consortium release</p> <pre><code>flowchart TD\n    A[\"Start consortium release\"] --&gt; B[\"Remove old files in GENIE release dir\"]\n    %% B --&gt; C[\"Login to Synapse\"]\n    %% C --&gt; D{\"Test / Staging / Prod Environment?\"}\n    %% D --&gt;|Test| E[\"Set test databaseSynIdMappingId\"]\n    %% D --&gt;|Staging| F[\"Set staging databaseSynIdMappingId, skip mutations in cis\"]\n    %% D --&gt;|Production| G[\"Set production databaseSynIdMappingId\"]\n    B --&gt; H[\"Prepare for processing by getting databaseSynIdMapping table, oncotree link, cbioportal folder, database synapse ids, etc\"]\n    %% H --&gt; I{\"Oncotree link provided?\"}\n    %% I --&gt;|No| J[\"Extract Oncotree URL from database\"]\n    %% I --&gt;|Yes| K[\"Use provided Oncotree URL\"]\n    %% J &amp; K --&gt; L[\"Check Oncotree URL accessibility\"]\n    %% L --&gt; M[\"Validate cBioPortal path exists\"]\n    %% M --&gt; N[\"Get Synapse IDs for consortium, process tracker, etc.\"]\n    %% N --&gt; O[\"Create or retrieve case_lists folder\"]\n    %% O --&gt; P{\"Staging?\"}\n    %% P -- No --&gt; Q[\"Start process tracking\"]\n    H --&gt; R[\"Query for all the centers for which data should be released\"]\n\n    %% Expanded stagingToCbio logic\n    %% R --&gt; S2[\"Create GENIE release directory if missing\"]\n    %% S1 --&gt; S2[\"Extract Synapse Table IDs (patient, sample, maf, bed, seg, etc.)\"]\n    R --&gt; S3[\"Create snapshots &amp; pull patient, sample, bed data\"]\n    S3 --&gt; S4[\"Merge patient + sample tables into clinicalDf\"]\n    S4 --&gt; S5[\"Run GENIE filters\"]\n    S5 --&gt; SD1[\"Variant Filters\"]\n    SD1 --&gt; SD2[\"Germline filter\"]\n    SD1 --&gt; SD3[\"MAF in BED\"]\n    SD2 &amp; SD3 --&gt; SD5[\"List of variants to remove\"]\n    S5 --&gt; SE1[\"Sample Filters\"]\n    SE1 --&gt; SE2[\"SEQ_DATE\"]\n    SE1 --&gt; SE3[\"No Bed file\"]\n    SE1 --&gt; SE4[\"Oncotree\"]\n    SE1 --&gt; SE5[\"Mutation In Cis\"]\n    SE2 &amp; SE3 &amp; SE4 &amp; SE5 --&gt; SE6[\"List of samples to remove\"]\n    SE6 --&gt; SS3[\"Merge/Filter/store clinical file\"]\n    %% SS3 --&gt; S6[\"Merge/Filter/store clinical file\"]\n    SD5 &amp; SS3 --&gt; S7[\"Merge/Filter/store MAF file\"]\n    SS3 --&gt; S8[\"Merge/Filter/store CNA file\"]\n    SS3 --&gt; S9[\"Merge/Filter/store Assay information file\"]\n    SS3 --&gt; S10[\"Merge/Filter/store SV file\"]\n    S8 &amp; S7 &amp; S9 &amp; S10 --&gt; S11[\"Merge/Filter/store Data Gene Matrix\"]\n    S11 --&gt; S12[\"Download and upload gene panel files\"]\n    SS3 --&gt; S13[\"Merge/Filter/store SEG file\"]\n    SS3 --&gt; S14[\"Merge/Filter/store BED files\"]\n    %% SS3 --&gt; S15[\"Return list of gene panel entities\"]\n\n    SS3 &amp; S12 &amp; S13 &amp; S14 --&gt; T[\"Remove old case list files\"]\n    T --&gt; U[\"Generate new case lists and upload to Synapse\"]\n    U --&gt; V[\"Revise metadata files with correct GENIE version\"]\n    V --&gt; W[\"Run cBioPortal validation script\"]\n    %% W --&gt; X{\"Production?\"}\n    %% X --&gt;|Yes| Y[\"Upload validation logs to Synapse\"]\n    W --&gt; Z[\"Create release folder with links to files\"]\n    %% Z --&gt; AA{\"Production?\"}\n    %% AA --&gt;|Yes| AB[\"End process tracking\"]\n    Z --&gt; AC[\"Run dashboard updater\"]\n    AC --&gt; AD[\"Generate dashboard HTML\"]\n    AD --&gt; AF[\"End\"]</code></pre>"},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.PWD","title":"<code>PWD = os.path.dirname(os.path.abspath(__file__))</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.parser","title":"<code>parser = argparse.ArgumentParser(description='Release GENIE consortium files')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.test_group","title":"<code>test_group = parser.add_mutually_exclusive_group()</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.args","title":"<code>args = parser.parse_args()</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.generate_dashboard_html","title":"<code>generate_dashboard_html(genie_version, staging=False, testing=False)</code>","text":"<p>Generates dashboard html writeout that gets uploaded to the release folder</p> PARAMETER DESCRIPTION <code>genie_version</code> <p>GENIE release</p> <p> TYPE: <code>str</code> </p> <code>staging</code> <p>Use staging files. Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>testing</code> <p>Use testing files. Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.generate_data_guide","title":"<code>generate_data_guide(genie_version, oncotree_version=None, database_mapping=None)</code>","text":"<p>Generates the GENIE data guide</p>"},{"location":"reference/main_pipeline_commands/database_to_staging/#bin.database_to_staging.main","title":"<code>main(genie_version, processing_date, cbioportal_path, oncotree_link=None, consortium_release_cutoff=184, test=False, staging=False, debug=False, skip_mutationsincis=False)</code>","text":"<ul> <li>Does parameter checks</li> <li>Updates process tracking start</li> <li>initiates database to staging</li> <li>create case lists</li> <li>revise meta files</li> <li>run cBioPortal validation</li> <li>create link versions</li> <li>update process tracking end</li> <li>Create dashboard tables and plots</li> </ul> PARAMETER DESCRIPTION <code>genie_version</code> <p>GENIE version,</p> <p> </p> <code>processing_date</code> <p>processing date</p> <p> </p> <code>cbioportal_path</code> <p>Path to cbioportal validator</p> <p> </p> <code>oncotree_link</code> <p>Link to oncotree codes</p> <p> DEFAULT: <code>None</code> </p> <code>consortium_release_cutoff</code> <p>release cut off value in days</p> <p> DEFAULT: <code>184</code> </p> <code>test</code> <p>Test flag, uses test databases</p> <p> DEFAULT: <code>False</code> </p> <code>staging</code> <p>Staging flag, uses staging databases</p> <p> DEFAULT: <code>False</code> </p> <code>debug</code> <p>Synapse debug flag</p> <p> DEFAULT: <code>False</code> </p> <code>skip_mutationsincis</code> <p>Skip mutation in cis filter</p> <p> DEFAULT: <code>False</code> </p>"},{"location":"reference/main_pipeline_commands/input_to_database/","title":"Input to Database","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database","title":"<code>bin.input_to_database</code>","text":"<p>Workflow  crawl Synapse folder for a center, validate, and update database tables.</p> <p>Known issues:</p> <ul> <li> <p>All data per center is downloaded every time (even if not changed)</p> <p>This increases the length of validation because not all data is changed. The complexity is around cross file validation.  There needs to be a way to determine relationships between files so that if a file depends on another only those files are downloaded.  This is harder for VCFs as there may be thousands of them</p> </li> <li> <p>Retraction from the sample/patient table is inefficient.  The sample and patient tables will first contain the data, and it will shortly be removed from the synapse tables.</p> </li> <li>Newer implementation of cross-file validation is available but clinical data is still using the older implementation which unnecesssarily complicates the code.</li> </ul> <pre><code>flowchart TD\n    A[\"For each center\"] --&gt; B[\"Extract center input files\"]\n    B --&gt; D{\"Has the center uploaded any data\"}\n    D -- No --&gt; E[\"Log: No files uploaded\"]\n    E --&gt; F[\"End\"]\n    D -- Yes --&gt; G[\"Validate files\"]\n    G --&gt; H{\"Are there valid files?\"}\n    H -- No --&gt; I[\"Log: No valid files\"]\n    I --&gt; F\n    H -- Yes --&gt; J{\"only_validate flag set?\"}\n    J -- Yes --&gt; K[\"Log: Validation only\"]\n    K --&gt; F\n    J -- No --&gt; L[\"Process valid files\"]\n    %% L --&gt; M[\"Update process tracker with start time\"]\n    L --&gt; N[\"Process files based on fileType\"]\n    %% N --&gt; O[\"Update process tracker with end time\"]\n    N --&gt; P[\"Upload processed data per file type into internal Synapse Tables and Center staging folders\"]\n    P --&gt; Q[\"Retract samples and patients based on retraction tables\"]\n    Q --&gt; F\n\n    subgraph \"File Type Processing\"\n        N --&gt; N1[\"clinical\"]\n        N1 --&gt; N1a[\"Remap NAACCR and other values to cbioportal accepted values\"]\n        N1a --&gt; N1b[\"Map SEQ_DATE to SEQ_YEAR\"]\n        N1b --&gt; N1d[\"Redact PHI\"]\n        N1d --&gt; N1e[\"Exclude all samples with invalid oncotree codes\"]\n\n        N --&gt; N2[\"maf\"]\n        N2 --&gt; N2a[\"Preprocessing: light edits to maf\"]\n        N2a --&gt; N2b[\"Re-annotate using Genome Nexus\"]\n\n        N --&gt; N3[\"vcf\"]\n        N3 --&gt; N3a[\"Preprocessing: Convert VCF to MAF\"]\n        N3a --&gt; N2b\n\n        N --&gt; N5[\"cna\"]\n        N5 --&gt; N5a[\"Remap gene symbols using processed BED data\"]\n        N5a --&gt; N5b[\"Duplicate genes are merged if possible after remapping\"]\n\n        N --&gt; N9[\"BED\"]\n        N9 --&gt; N9a[\"Remap genes to hg19 positions\"]\n        N9a --&gt; N9b[\"Gene panel files are created and uploaded to staging folder\"]\n\n        N --&gt; N6[\"assay information, mutation in cis, sample/patient retraction, seg, Structural Variants\"]\n        N6 --&gt; N6a[\"Extract data and mild transforms\"]\n\n    end\n\n    %% %% Subgraph for get_center_input_files function\n    %% subgraph \"get_center_input_files Function\"\n    %%     B --&gt; B1[\"Iterate over all files uploaded by center\"]\n    %%     B1 --&gt; B6{\"Does file name end with '.vcf' and process != 'mutation'?\"}\n    %%     B6 -- Yes --&gt; B7[\"Skip this file\"]\n    %%     B6 -- No --&gt; B8[\"Download file\"]\n    %%     B8 --&gt; B10{\"Is it a clinical file?\"}\n    %%     B10 -- Yes --&gt; B11[\"Append entity to clinicalpair_entities\"]\n    %%     B10 -- No --&gt; B12[\"Append [entity] to prepared_center_file_list\"]\n    %%     B11 --&gt; B13\n    %%     B12 --&gt; B13\n    %%     B13{\"Is clinicalpair_entities not empty after loop?\"}\n    %%     B13 -- Yes --&gt; B14[\"Append clinicalpair_entities to prepared_center_file_list\"]\n    %%     B14 --&gt; B15[\"Return prepared_center_file_list\"]\n    %%     B13 -- No --&gt; B15\n    %% end</code></pre>"},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database.parser","title":"<code>parser = argparse.ArgumentParser(description='GENIE center ')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database.args","title":"<code>args = parser.parse_args()</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_commands/input_to_database/#bin.input_to_database.main","title":"<code>main(process, project_id, center=None, delete_old=False, only_validate=False, oncotree_link=None, genie_annotation_pkg=None, create_new_maf_database=False, debug=False, format_registry=None)</code>","text":"<p>Invoke the GENIE ETL pipeline from data input files to synapse tables</p> PARAMETER DESCRIPTION <code>process</code> <p>main or mutation processing</p> <p> TYPE: <code>str</code> </p> <code>project_id</code> <p>Synapse project id that houses GENIE project</p> <p> TYPE: <code>str</code> </p> <code>center</code> <p>GENIE center. Defaults to None.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>delete_old</code> <p>True to delete all old input/processed files.                          Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>only_validate</code> <p>True if only validate files. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>oncotree_link</code> <p>Link to oncotree version. Defaults to None.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>genie_annotation_pkg</code> <p>vcf/maf conversion tools.                                   Defaults to None.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>create_new_maf_database</code> <p>To create new maf table.                                       Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>debug</code> <p>Debug mode. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>format_registry</code> <p>File format registry python package.                              Defaults to None.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> RAISES DESCRIPTION <code>ValueError</code> <p>If invalid center name is specified</p> <code>Exception</code> <p>If processing is already happening.</p>"},{"location":"reference/main_pipeline_steps/consortium_to_public/","title":"Consortium to Public","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public","title":"<code>genie.consortium_to_public</code>","text":"<p>Converts consortium release files to public release files</p>"},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public.stdout_handler","title":"<code>stdout_handler = logging.StreamHandler(stream=(sys.stdout))</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public.DEPRECATED_PUBLIC_RELEASE_FILES","title":"<code>DEPRECATED_PUBLIC_RELEASE_FILES = ['data_fusions.txt', 'meta_fusions.txt']</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public._copyRecursive","title":"<code>_copyRecursive(syn, entity, destinationId, mapping=None, skipCopyAnnotations=False, **kwargs)</code>","text":"<p>NOTE: This is a copy of the function found here: https://github.com/Sage-Bionetworks/synapsePythonClient/blob/develop/synapseutils/copy_functions.py#L409 This was copied because there is a restriction that doesn't allow for copying entities with access requirements</p> <p>Recursively copies synapse entites, but does not copy the wikis</p> PARAMETER DESCRIPTION <code>syn</code> <p>A Synapse object with user's login</p> <p> TYPE: <code>Synapse</code> </p> <code>entity</code> <p>A synapse entity ID</p> <p> TYPE: <code>str</code> </p> <code>destinationId</code> <p>Synapse ID of a folder/project that the copied entity is being copied to</p> <p> TYPE: <code>str</code> </p> <code>mapping</code> <p>A mapping of the old entities to the new entities</p> <p> TYPE: <code>Dict[str, str]</code> DEFAULT: <code>None</code> </p> <code>skipCopyAnnotations</code> <p>Skips copying the annotations                     Default is False</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>Dict[str, str]</code> <p>a mapping between the original and copied entity: {'syn1234':'syn33455'}</p>"},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public.commonVariantFilter","title":"<code>commonVariantFilter(mafDf)</code>","text":"<p>This filter returns variants to keep</p> PARAMETER DESCRIPTION <code>mafDf</code> <p>Maf dataframe</p> <p> </p>"},{"location":"reference/main_pipeline_steps/consortium_to_public/#genie.consortium_to_public.consortiumToPublic","title":"<code>consortiumToPublic(syn, processingDate, genie_version, releaseId, databaseSynIdMappingDf, publicReleaseCutOff=365)</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/","title":"Database to Staging","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging","title":"<code>genie.database_to_staging</code>","text":"<p>Functions for releasing GENIE consortium releases</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.GENIE_RELEASE_DIR","title":"<code>GENIE_RELEASE_DIR = os.path.join(os.path.expanduser('~/.synapseCache'), 'GENIE_release')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.CASE_LIST_PATH","title":"<code>CASE_LIST_PATH = os.path.join(GENIE_RELEASE_DIR, 'case_lists')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.CNA_CENTER_PATH","title":"<code>CNA_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_CNA_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.SAMPLE_CENTER_PATH","title":"<code>SAMPLE_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_clinical_supp_sample_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.PATIENT_CENTER_PATH","title":"<code>PATIENT_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_clinical_supp_patient_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.MUTATIONS_CENTER_PATH","title":"<code>MUTATIONS_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_mutations_extended_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.FUSIONS_CENTER_PATH","title":"<code>FUSIONS_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_fusions_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.SEG_CENTER_PATH","title":"<code>SEG_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_cna_hg19_%s.seg')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.SV_CENTER_PATH","title":"<code>SV_CENTER_PATH = os.path.join(GENIE_RELEASE_DIR, 'data_sv_%s.txt')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.BED_DIFFS_SEQASSAY_PATH","title":"<code>BED_DIFFS_SEQASSAY_PATH = os.path.join(GENIE_RELEASE_DIR, 'diff_%s.csv')</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.FULL_MAF_RELEASE_COLUMNS","title":"<code>FULL_MAF_RELEASE_COLUMNS = ['Hugo_Symbol', 'Entrez_Gene_Id', 'Center', 'NCBI_Build', 'Chromosome', 'Start_Position', 'End_Position', 'Strand', 'Consequence', 'Variant_Classification', 'Variant_Type', 'Reference_Allele', 'Tumor_Seq_Allele1', 'Tumor_Seq_Allele2', 'dbSNP_RS', 'dbSNP_Val_Status', 'Tumor_Sample_Barcode', 'Matched_Norm_Sample_Barcode', 'Match_Norm_Seq_Allele1', 'Match_Norm_Seq_Allele2', 'Tumor_Validation_Allele1', 'Tumor_Validation_Allele2', 'Match_Norm_Validation_Allele1', 'Match_Norm_Validation_Allele2', 'Verification_Status', 'Validation_Status', 'Mutation_Status', 'Sequencing_Phase', 'Sequence_Source', 'Validation_Method', 'Score', 'BAM_File', 'Sequencer', 't_ref_count', 't_alt_count', 'n_ref_count', 'n_alt_count', 'HGVSc', 'HGVSp', 'HGVSp_Short', 'Transcript_ID', 'RefSeq', 'Protein_position', 'Codons', 'Exon_Number', 'gnomAD_AF', 'gnomAD_AFR_AF', 'gnomAD_AMR_AF', 'gnomAD_ASJ_AF', 'gnomAD_EAS_AF', 'gnomAD_FIN_AF', 'gnomAD_NFE_AF', 'gnomAD_OTH_AF', 'gnomAD_SAS_AF', 'FILTER', 'Polyphen_Prediction', 'Polyphen_Score', 'SIFT_Prediction', 'SIFT_Score', 'SWISSPROT', 'n_depth', 't_depth', 'Annotation_Status', 'mutationInCis_Flag']</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.DEPRECATED_CONSORTIUM_RELEASE_FILES","title":"<code>DEPRECATED_CONSORTIUM_RELEASE_FILES = ['data_fusions.txt', 'meta_fusions.txt']</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging._to_redact_interval","title":"<code>_to_redact_interval(df_col)</code>","text":"<p>Determines year values that are \"&lt;18\" and interval values &gt;89 that need to be redacted Returns bool because BIRTH_YEAR needs to be redacted as well based on the results</p> PARAMETER DESCRIPTION <code>df_col</code> <p>Dataframe column/pandas.Series of an interval column</p> <p> TYPE: <code>Series</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>pandas.Series: to redact boolean vector    pandas.Series: to redact pediatric boolean vector</p> <p> TYPE: <code>Tuple[Series, Series]</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging._redact_year","title":"<code>_redact_year(df_col)</code>","text":"<p>Redacts year values that have &lt; or &gt;</p> PARAMETER DESCRIPTION <code>df_col</code> <p>Dataframe column/pandas.Series of a year column</p> <p> TYPE: <code>Series</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pandas.Series: Redacted series</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging._redact_ped_year","title":"<code>_redact_ped_year(df_col)</code>","text":"<p>Redacts year values that have &lt;</p> PARAMETER DESCRIPTION <code>df_col</code> <p>Dataframe column/pandas.Series of a year column</p> <p> TYPE: <code>Series</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pandas.Series: Redacted series</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging._to_redact_difference","title":"<code>_to_redact_difference(df_col_year1, df_col_year2)</code>","text":"<p>Determine if difference between year2 and year1 is &gt; 89</p> PARAMETER DESCRIPTION <code>df_col_year1</code> <p>Dataframe column/pandas.Series of a year column</p> <p> TYPE: <code>Series</code> </p> <code>df_col_year2</code> <p>Dataframe column/pandas.Series of a year column</p> <p> TYPE: <code>Series</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pandas.Series: to redact boolean vector</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.redact_phi","title":"<code>redact_phi(clinicaldf, interval_cols_to_redact=['AGE_AT_SEQ_REPORT', 'INT_CONTACT', 'INT_DOD'])</code>","text":"<p>Redacts the PHI by re-annotating the clinical file</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>merged clinical dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>interval_cols_to_redact</code> <p>List of interval columns to redact.                      Defaults to ['AGE_AT_SEQ_REPORT',                                   'INT_CONTACT',                                   'INT_DOD']</p> <p> TYPE: <code>list</code> DEFAULT: <code>['AGE_AT_SEQ_REPORT', 'INT_CONTACT', 'INT_DOD']</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pandas.DataFrame: Redacted clinical dataframe</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.remove_maf_samples","title":"<code>remove_maf_samples(mafdf, keep_samples)</code>","text":"<p>Remove samples from maf file</p> PARAMETER DESCRIPTION <code>mafdf</code> <p>Maf dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>keep_samples</code> <p>Samples to keep</p> <p> TYPE: <code>list</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>Filtered maf dataframe</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.get_whitelist_variants_idx","title":"<code>get_whitelist_variants_idx(mafdf)</code>","text":"<p>Get boolean vector for variants that are known somatic sites This is to override the germline filter</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.configure_maf","title":"<code>configure_maf(mafdf, remove_variants, flagged_variants)</code>","text":"<p>Configures each maf dataframe, does germline filtering</p> <p>Germline filtering for MAF files uses the gnomAD columns that refer to the allele frequencies (AF) of variants in different population groups from the gnomAD (Genome Aggregation Database). This filter will filter out variants with a maximum AF &gt; 0.05% across all populations which are typically common germline variants.</p> <p>Germline filtering for MAF files occurs during release instead of during processing because the MAF file gets re-annotated during processing via genome nexus annotation.</p> PARAMETER DESCRIPTION <code>mafdf</code> <p>Maf dataframe</p> <p> </p> <code>remove_variants</code> <p>Variants to remove</p> <p> </p> <code>flagged_variants</code> <p>Variants to flag</p> <p> </p> RETURNS DESCRIPTION <p>configured maf row</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.calculate_missing_variant_counts","title":"<code>calculate_missing_variant_counts(depth, alt_count, ref_count)</code>","text":"<p>Calculate missing counts. t_depth = t_alt_count + t_ref_count</p> PARAMETER DESCRIPTION <code>depth</code> <p>Allele Depth</p> <p> TYPE: <code>Series</code> </p> <code>alt_count</code> <p>Allele alt counts</p> <p> TYPE: <code>Series</code> </p> <code>ref_count</code> <p>Allele ref counts</p> <p> TYPE: <code>Series</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>filled in depth, alt_count and ref_count values</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.runMAFinBED","title":"<code>runMAFinBED(syn, center_mappingdf, test=False, staging=False, genieVersion='test')</code>","text":"<p>Run MAF in BED script, filter data and update MAFinBED files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse client connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center_mappingdf</code> <p>center mapping dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>test</code> <p>Testing parameter. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>staging</code> <p>Staging parameter. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>genieVersion</code> <p>GENIE version. Defaults to \"test\".</p> <p> TYPE: <code>str</code> DEFAULT: <code>'test'</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pd.Series: Variants to remove</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.get_run_maf_in_bed_script_cmd","title":"<code>get_run_maf_in_bed_script_cmd(notinbed_file, script_dir, test, staging)</code>","text":"<p>This function gets the MAFinBED R script command call based on    whether we are running in test, staging or production mode</p> PARAMETER DESCRIPTION <code>notinbed_file</code> <p>Full path to the notinbed csv</p> <p> TYPE: <code>str</code> </p> <code>script_dir</code> <p>directory of the MAFinBED script</p> <p> TYPE: <code>str</code> </p> <code>test</code> <p>Testing parameter.</p> <p> TYPE: <code>bool</code> </p> <code>staging</code> <p>Staging parameter</p> <p> TYPE: <code>bool</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Full command call for the MAFinBED script</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_maf_in_bed_filtered_variants","title":"<code>store_maf_in_bed_filtered_variants(syn, notinbed_file, center_mapping_df, genie_version)</code>","text":"<p>This script retrieves and stores the filtered variants generated     from running the MAFinBed script as files on Synapse. This script     then returns the not in bed file with the removed variants column     added.     TODO: Add handling for empty file?</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse client connection</p> <p> TYPE: <code>Synapse</code> </p> <code>notinbed_file</code> <p>input file</p> <p> TYPE: <code>str</code> </p> <code>center_mapping_df</code> <p>the center mapping dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>genie_version</code> <p>version of this genie run</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: filtered variants dataframe with removed variants column added</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.seq_date_filter","title":"<code>seq_date_filter(clinicalDf, processingDate, consortiumReleaseCutOff)</code>","text":"<p>Filter samples by seq date</p> PARAMETER DESCRIPTION <code>clinicalDf</code> <p>Clinical dataframe</p> <p> </p> <code>processingDate</code> <p>Processing date in form of Apr-XXXX</p> <p> </p> <code>consortiumReleaseCutOff</code> <p>Release cut off days</p> <p> </p> RETURNS DESCRIPTION <code>list</code> <p>Samples to remove</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.mutation_in_cis_filter","title":"<code>mutation_in_cis_filter(syn, skipMutationsInCis, variant_filtering_synId, center_mappingdf, genieVersion, test=False, staging=False)</code>","text":"<p>Run mutation in cis filter, look up samples to remove.</p> <p>The mutation in cis script ONLY runs WHEN the skipMutationsInCis parameter is FALSE</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>skipMutationsInCis</code> <p>Skip this filter</p> <p> </p> <code>variant_filtering_synId</code> <p>mergeCheck database dataframe</p> <p> </p> <code>center_mappingdf</code> <p>center mapping dataframe</p> <p> </p> <code>genieVersion</code> <p>GENIE version. Default is test.</p> <p> </p> <code>test</code> <p>Testing parameter. Default is False.</p> <p> DEFAULT: <code>False</code> </p> <code>staging</code> <p>Staging parameter. Default is False.</p> <p> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <p>pd.Series: Samples to remove</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.get_mutation_in_cis_filter_script_cmd","title":"<code>get_mutation_in_cis_filter_script_cmd(test, staging)</code>","text":"<p>This function gets the mutation_in_cis_filter R script     command call based on whether we are running in test, staging     or production mode</p> PARAMETER DESCRIPTION <code>test</code> <p>Testing parameter.</p> <p> TYPE: <code>bool</code> </p> <code>staging</code> <p>Staging parameter. Default is False.</p> <p> TYPE: <code>bool</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Full command call for the mergeCheck script</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.get_mutation_in_cis_filtered_samples","title":"<code>get_mutation_in_cis_filtered_samples(syn, variant_filtering_synId)</code>","text":"<p>Gets the samples to remove in our variant filtering table    TODO: Add handling for when we have 0 row query results Args:     syn (synapseclient.Synapse): synapse client connection     variant_filtering_synId (str): variant filtering synapse id</p> RETURNS DESCRIPTION <code>list</code> <p>pd.Series: removed samples</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.get_mutation_in_cis_flagged_variants","title":"<code>get_mutation_in_cis_flagged_variants(syn, variant_filtering_synId)</code>","text":"<p>Gets the flagged variants in our variant filtering table which is    a unique string concatenation of the Chromosome, Start_Position,    HGVSp_Short, Reference_Allele, Tumor_Seq_Allele2 and Tumor_Sample_Barcode    columns    TODO: Add handling for when we have 0 row query results</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse client connection</p> <p> TYPE: <code>Synapse</code> </p> <code>variant_filtering_synId</code> <p>variant filtering synapse id</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>Series</code> <p>pd.Series: flagged variants</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_mutation_in_cis_files_to_staging","title":"<code>store_mutation_in_cis_files_to_staging(syn, center_mappingdf, variant_filtering_synId, genieVersion)</code>","text":"<p>Stores the mutation in cis files to synapse per     center</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse client connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center_mappingdf</code> <p>center mapping dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>variant_filtering_synId</code> <p>variant filtering synapse id</p> <p> TYPE: <code>str</code> </p> <code>genieVersion</code> <p>version of the genie pipeline run</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.seq_assay_id_filter","title":"<code>seq_assay_id_filter(clinicaldf)</code>","text":"<p>(Deprecated) Remove samples that are part of SEQ_ASSAY_IDs with less than 50 samples</p> PARAMETER DESCRIPTION <code>clinicalDf</code> <p>Sample clinical dataframe</p> <p> </p> RETURNS DESCRIPTION <p>pd.Series: samples to remove</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.no_genepanel_filter","title":"<code>no_genepanel_filter(clinicaldf, beddf)</code>","text":"<p>Remove samples that don't have bed files associated with them</p> PARAMETER DESCRIPTION <code>clinicaldf</code> <p>Clinical data</p> <p> </p> <code>beddf</code> <p>bed data</p> <p> </p> RETURNS DESCRIPTION <p>pd.Series: samples to remove</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_gene_panel_files","title":"<code>store_gene_panel_files(syn, fileviewSynId, genieVersion, data_gene_panel, consortiumReleaseSynId, wes_seqassayids)</code>","text":""},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.filter_out_germline_variants","title":"<code>filter_out_germline_variants(input_data, status_col_str)</code>","text":"<p>Filters out germline variants given a status col str. Genie pipeline     cannot have any of these variants. NOTE: We have to search for the     status column because there's no column name validation in the release     steps so the status column may have different casing.</p> PARAMETER DESCRIPTION <code>input_data</code> <p>input data with germline variants to filter out</p> <p> TYPE: <code>DataFrame</code> </p> <code>status_col_str</code> <p>search string for the status column for the data</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: filtered out germline variant data</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_sv_files","title":"<code>store_sv_files(syn, release_synid, genie_version, synid, keep_for_center_consortium_samples, keep_for_merged_consortium_samples, current_release_staging, center_mappingdf)</code>","text":"<p>Create, filter, configure, and store structural variant file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> TYPE: <code>str</code> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> TYPE: <code>str</code> </p> <code>synid</code> <p>SV database synid</p> <p> TYPE: <code>str</code> </p> <code>keep_for_center_consortium_samples</code> <p>Samples to keep for center files</p> <p> TYPE: <code>List[str]</code> </p> <code>keep_for_merged_consortium_samples</code> <p>Samples to keep for merged file</p> <p> TYPE: <code>List[str]</code> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> TYPE: <code>bool</code> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <p>List of SV Samples</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.append_or_create_release_maf","title":"<code>append_or_create_release_maf(dataframe, filepath)</code>","text":"<p>Creates a file with the dataframe or appends to a existing file.</p> PARAMETER DESCRIPTION <code>df</code> <p>pandas.dataframe to write out</p> <p> </p> <code>filepath</code> <p>Filepath to append or create</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_maf_files","title":"<code>store_maf_files(syn, genie_version, flatfiles_view_synid, release_synid, clinicaldf, center_mappingdf, keep_for_merged_consortium_samples, keep_for_center_consortium_samples, remove_mafinbed_variants, flagged_mutationInCis_variants, current_release_staging)</code>","text":"<p>Create, filter, configure, and store maf file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>flatfiles_view_synid</code> <p>Synapse id of fileview with all the flat files</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> <code>clinicaldf</code> <p>Clinical dataframe with SAMPLE_ID and CENTER</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>keep_for_merged_consortium_samples</code> <p>Samples to keep for merged file</p> <p> </p> <code>keep_for_center_consortium_samples</code> <p>Samples to keep for center files</p> <p> </p> <code>remove_mafinbed_variants</code> <p>Variants to remove</p> <p> </p> <code>flagged_mutationInCis_variants</code> <p>Variants to flag</p> <p> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.run_genie_filters","title":"<code>run_genie_filters(syn, genie_version, variant_filtering_synId, clinicaldf, beddf, center_mappingdf, processing_date, skip_mutationsincis, consortium_release_cutoff, test, current_release_staging)</code>","text":"<p>Run GENIE filters and returns variants and samples to remove</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>variant_filtering_synId</code> <p>Synapse id of mutationInCis table</p> <p> </p> <code>clinicaldf</code> <p>Clinical dataframe with SAMPLE_ID and SEQ_ASSAY_ID</p> <p> </p> <code>beddf</code> <p>Bed dataframe</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>processing_date</code> <p>Processing date</p> <p> </p> <code>skip_mutationsincis</code> <p>Skip mutation in cis filter</p> <p> </p> <code>consortium_release_cutoff</code> <p>Release cutoff in days</p> <p> </p> <code>test</code> <p>Test flag</p> <p> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> </p> RETURNS DESCRIPTION <p>pandas.Series: Variants to remove</p> <code>set</code> <p>samples to remove for release files</p> <code>set</code> <p>samples to remove for center files</p> <p>pandas.Series: Variants to flag</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_assay_info_files","title":"<code>store_assay_info_files(syn, genie_version, assay_info_synid, clinicaldf, release_synid)</code>","text":"<p>Creates, stores assay information and gets WES panel list</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>assay_info_synid</code> <p>Assay information database synid</p> <p> </p> <code>clinicaldf</code> <p>Clinical dataframe with SAMPLE_ID and SEQ_ASSAY_ID</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> RETURNS DESCRIPTION <p>List of whole exome sequencing SEQ_ASSAY_IDs</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_clinical_files","title":"<code>store_clinical_files(syn, genie_version, clinicaldf, oncotree_url, sample_cols, patient_cols, remove_center_consortium_samples, remove_merged_consortium_samples, release_synid, current_release_staging, center_mappingdf, databaseSynIdMappingDf, used=None)</code>","text":"<p>Create, filter, configure, and store clinical file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>clinicaldf</code> <p>Clinical dataframe with SAMPLE_ID and SEQ_ASSAY_ID</p> <p> </p> <code>oncotree_url</code> <p>Oncotree URL</p> <p> </p> <code>sample_cols</code> <p>Clinical sample columns</p> <p> </p> <code>patient_cols</code> <p>Clinical patient columns</p> <p> </p> <code>remove_center_consortium_samples</code> <p>Samples to remove for center files</p> <p> </p> <code>remove_merged_consortium_samples</code> <p>Samples to remove for merged file</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>databaseSynIdMappingDf</code> <p>Database to Synapse Id mapping</p> <p> </p> RETURNS DESCRIPTION <p>pandas.DataFrame: configured clinical dataframe</p> <p>pandas.Series: samples to keep for center files</p> <p>pandas.Series: samples to keep for release files</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_cna_files","title":"<code>store_cna_files(syn, flatfiles_view_synid, keep_for_center_consortium_samples, keep_for_merged_consortium_samples, center_mappingdf, genie_version, release_synid, current_release_staging)</code>","text":"<p>Create, filter and store cna file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>flatfiles_view_synid</code> <p>Synapse id of fileview with all the flat files</p> <p> </p> <code>keep_for_center_consortium_samples</code> <p>Samples to keep for center files</p> <p> </p> <code>keep_for_merged_consortium_samples</code> <p>Samples to keep for merged file</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> <p>Returns:     list: CNA samples</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_seg_files","title":"<code>store_seg_files(syn, genie_version, seg_synid, release_synid, keep_for_center_consortium_samples, keep_for_merged_consortium_samples, center_mappingdf, current_release_staging)</code>","text":"<p>Create, filter and store seg file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>seg_synid</code> <p>Seg database synid</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> <code>keep_for_center_consortium_samples</code> <p>Samples to keep for center files</p> <p> </p> <code>keep_for_merged_consortium_samples</code> <p>Samples to keep for merged file</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_data_gene_matrix","title":"<code>store_data_gene_matrix(syn, genie_version, clinicaldf, cna_samples, release_synid, wes_seqassayids, sv_samples)</code>","text":"<p>Create and store data gene matrix file</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>clinicaldf</code> <p>Clinical dataframe with SAMPLE_ID and SEQ_ASSAY_ID</p> <p> </p> <code>cna_samples</code> <p>Samples with CNA</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p> <code>wes_seqassayids</code> <p>Whole exome sequencing SEQ_ASSAY_IDs</p> <p> </p> <code>sv_samples</code> <p>Samples with SV</p> <p> </p> RETURNS DESCRIPTION <p>pandas.DataFrame: data gene matrix dataframe</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.store_bed_files","title":"<code>store_bed_files(syn, genie_version, beddf, seq_assay_ids, center_mappingdf, current_release_staging, release_synid, used=None)</code>","text":"<p>Store bed files, store the bed regions that had symbols remapped Filters bed file by clinical dataframe seq assays</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version (ie. v6.1-consortium)</p> <p> </p> <code>beddf</code> <p>Bed dataframe</p> <p> </p> <code>seq_assay_ids</code> <p>All SEQ_ASSAY_IDs in the clinical file</p> <p> </p> <code>center_mappingdf</code> <p>Center mapping dataframe</p> <p> </p> <code>current_release_staging</code> <p>Staging flag</p> <p> </p> <code>release_synid</code> <p>Synapse id to store release file</p> <p> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.stagingToCbio","title":"<code>stagingToCbio(syn, processingDate, genieVersion, CENTER_MAPPING_DF, databaseSynIdMappingDf, oncotree_url=None, consortiumReleaseCutOff=183, current_release_staging=False, skipMutationsInCis=False, test=False)</code>","text":"<p>Main function that takes the GENIE database and creates release files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>processingDate</code> <p>Processing date in form of Apr-XXXX</p> <p> </p> <code>genieVersion</code> <p>GENIE version. Default is test.</p> <p> </p> <code>CENTER_MAPPING_DF</code> <p>center mapping dataframe</p> <p> </p> <code>databaseSynIdMappingDf</code> <p>Database to Synapse Id mapping</p> <p> </p> <code>oncotree_url</code> <p>Oncotree link</p> <p> DEFAULT: <code>None</code> </p> <code>consortiumReleaseCutOff</code> <p>Release cut off days</p> <p> DEFAULT: <code>183</code> </p> <code>current_release_staging</code> <p>Is it staging. Default is False.</p> <p> DEFAULT: <code>False</code> </p> <code>skipMutationsInCis</code> <p>Skip mutation in cis filter. Default is False.</p> <p> DEFAULT: <code>False</code> </p> <code>test</code> <p>Testing parameter. Default is False.</p> <p> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>list</code> <p>Gene panel entities</p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.revise_metadata_files","title":"<code>revise_metadata_files(syn, consortiumid, genie_version=None)</code>","text":"<p>Rewrite metadata files with the correct GENIE version</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>consortiumid</code> <p>Synapse id of consortium release folder</p> <p> </p> <code>genie_version</code> <p>GENIE version, Default to None</p> <p> DEFAULT: <code>None</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.search_or_create_folder","title":"<code>search_or_create_folder(syn, parentid, folder_name)</code>","text":"<p>Searches for an existing Synapse Folder given a parent id and creates the Synapse folder if it doesn't exist</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>parentid</code> <p>Synapse Id of a project or folder</p> <p> TYPE: <code>str</code> </p> <code>folder_name</code> <p>Folde rname</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Synapse Folder id</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/database_to_staging/#genie.database_to_staging.create_link_version","title":"<code>create_link_version(syn, genie_version, case_list_entities, gene_panel_entities, database_synid_mappingdf, release_type='consortium')</code>","text":"<p>Create release links from the actual entity and version</p> <p>TODO: Refactor to use fileviews</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>genie_version</code> <p>GENIE version number</p> <p> </p> <code>case_list_entities</code> <p>Case list entities</p> <p> </p> <code>gene_panel_entities</code> <p>Gene panel entities</p> <p> </p> <code>database_synid_mappingdf</code> <p>dataframe containing database to                       synapse id mapping</p> <p> </p> <code>release_type</code> <p>'consortium' or 'public' release</p> <p> DEFAULT: <code>'consortium'</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/","title":"input_to_database","text":""},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database","title":"<code>genie.input_to_database</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.DUPLICATED_FILE_ERROR","title":"<code>DUPLICATED_FILE_ERROR = 'Duplicated filename! Files should be uploaded as new versions and the entire dataset should be uploaded.'</code>  <code>module-attribute</code>","text":"<p>TODO: Could potentially get all the inforamation of the file entity right here To avoid the syn.get rest call later which doesn't actually download the file</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.entity_date_to_unix_epoch_time","title":"<code>entity_date_to_unix_epoch_time(entity_date_time)</code>","text":"<p>Convert Synapse object date/time string (from modifiedOn or createdOn properties) to UNIX time</p> PARAMETER DESCRIPTION <code>entity_date_time</code> <p>Synapse object date/time string in this format: 2018-10-25T20:16:07.959Z</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>int</code> <p>unix epoch time</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.check_existing_file_status","title":"<code>check_existing_file_status(validation_status_table, error_tracker_table, entities)</code>","text":"<p>This function checks input files against the existing validation and error tracking dataframe</p> PARAMETER DESCRIPTION <code>validation_status_table</code> <p>Validation status Synapse Table query result</p> <p> </p> <code>error_tracker_table</code> <p>Error tracking Synapse Table query result</p> <p> </p> <code>entities</code> <p>list of center input entites</p> <p> </p> RETURNS DESCRIPTION <code>dict</code> <p>Input file status status_list: file validation status error_list: Errors of the files if they exist, to_validate: Boolean value for whether of not an input              file needs to be validated</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database._send_validation_error_email","title":"<code>_send_validation_error_email(syn, user, message_objs)</code>","text":"<p>Sends validation error email</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>user</code> <p>username to send message to</p> <p> </p> <code>message_objs</code> <p>list of dicts with 'filenames' and 'messages' to send</p> <p> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database._get_status_and_error_list","title":"<code>_get_status_and_error_list(valid, message, entities)</code>","text":"<p>Helper function to return the status and error list of the files based on validation result.</p> PARAMETER DESCRIPTION <code>valid</code> <p>Boolean value of results of validation</p> <p> </p> <code>message</code> <p>Validation message</p> <p> </p> <code>entities</code> <p>List of Synapse Entities</p> <p> </p> RETURNS DESCRIPTION <code>tuple</code> <p>input_status_list - status of input files list,    invalid_errors_list - error list</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.validatefile","title":"<code>validatefile(syn, project_id, entities, validation_status_table, error_tracker_table, center, format_registry=None, genie_config=None, ancillary_files=None)</code>","text":"<p>Validate a list of entities.</p> <p>If a file has not changed, then it doesn't need to be validated.</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> TYPE: <code>Synapse</code> </p> <code>project_id</code> <p>GENIE Synapse project id</p> <p> TYPE: <code>str</code> </p> <code>entities</code> <p>A list of entities for a single file 'type' (usually a single file, but clinical can have two)</p> <p> TYPE: <code>List[File]</code> </p> <code>validation_status_table</code> <p>Validation status dataframe</p> <p> TYPE: <code>CsvFileTable</code> </p> <code>error_tracker_table</code> <p>Invalid files error tracking dataframe</p> <p> TYPE: <code>CsvFileTable</code> </p> <code>center</code> <p>Center of interest</p> <p> TYPE: <code>str</code> </p> <code>format_registry</code> <p>GENIE file format registry.                                      Defaults to None.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>genie_config</code> <p>See example of genie config at                                   ./genie_config.json. Defaults to None.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>ancillary_files</code> <p>all files downloaded for validation</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>tuple</code> <p>input_status_list - status of input files,    invalid_errors_list - error list    messages_to_send - list of tuples with (filenames, message, file_users)</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.processfiles","title":"<code>processfiles(syn, validfiles, center, path_to_genie, processing='main', format_registry=None, genie_config=None)</code>","text":"<p>Processing validated files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>validfiles</code> <p>pandas dataframe containing validated files         has 'id', 'path', and 'fileType' column</p> <p> </p> <code>center</code> <p>GENIE center name</p> <p> </p> <code>path_to_genie</code> <p>Path to GENIE workdir</p> <p> </p> <code>center_mapping_df</code> <p>Center mapping dataframe</p> <p> </p> <code>oncotree_link</code> <p>Link to oncotree</p> <p> </p> <code>databaseToSynIdMappingDf</code> <p>Database to synapse id mapping dataframe</p> <p> </p> <code>processing</code> <p>Processing type. Defaults to main</p> <p> DEFAULT: <code>'main'</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.append_duplication_errors","title":"<code>append_duplication_errors(duplicated_filesdf, user_message_dict)</code>","text":"<p>Duplicated files can occur because centers can upload files with the same filename in different folders.  This is to append duplication errors to the list of errors to email</p> PARAMETER DESCRIPTION <code>duplicated_filesdf</code> <p>Dataframe of duplciated files</p> <p> </p> <code>user_message_dict</code> <p>Dictionary containing list of error messages to                send to each user.</p> <p> </p> RETURNS DESCRIPTION <p>Dictionary containing list of error messages to send to each user.</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.get_duplicated_files","title":"<code>get_duplicated_files(validation_statusdf)</code>","text":"<p>Check for duplicated files.  There should be no duplication, files should be uploaded as new versions and the entire dataset should be uploaded everytime</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.get_duplicated_files--todo-this-is-a-custom-genie-function","title":"TODO: This is a custom GENIE function","text":"PARAMETER DESCRIPTION <code>validation_statusdf</code> <p>dataframe with 'name' and 'id' column</p> <p> </p> <code>duplicated_error_message</code> <p>Error message for duplicated files</p> <p> </p> RETURNS DESCRIPTION <p>dataframe with 'id', 'name', 'errors', 'center', 'fileType'</p> <p>and 'entity' of duplicated files</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.build_validation_status_table","title":"<code>build_validation_status_table(input_valid_statuses)</code>","text":"<p>Build validation status dataframe</p> PARAMETER DESCRIPTION <code>input_valid_statuses</code> <p>list of file validation status</p> <p> TYPE: <code>List[dict]</code> </p> RETURNS DESCRIPTION <p>Validation status dataframe</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.build_error_tracking_table","title":"<code>build_error_tracking_table(invalid_errors)</code>","text":"<p>Build error tracking dataframe</p> PARAMETER DESCRIPTION <code>invalid_errors</code> <p>list of file invalid errors</p> <p> TYPE: <code>List[dict]</code> </p> RETURNS DESCRIPTION <p>Error tracking dataframe</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.update_status_and_error_tables","title":"<code>update_status_and_error_tables(syn, input_valid_statusdf, invalid_errorsdf, validation_status_table, error_tracker_table)</code>","text":"<p>Update validation status and error tracking table</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>center</code> <p>Center</p> <p> </p> <code>input_valid_status</code> <p>list of lists of validation status</p> <p> </p> <code>invalid_errors</code> <p>List of lists of invalid errors</p> <p> </p> <code>validation_status_table</code> <p>Synapse table query of validation status</p> <p> </p> <code>error_tracker_table</code> <p>Synapse table query of error tracker</p> <p> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database._update_tables_content","title":"<code>_update_tables_content(validation_statusdf, error_trackingdf)</code>","text":"<p>Update validation status and error tracking dataframes with duplicated files.  Also update the error table to only contain errors - centers may have fixed their files so will want to remove old errors.</p> PARAMETER DESCRIPTION <code>validation_statusdf</code> <p>Validation status dataframe</p> <p> </p> <code>error_trackingdf</code> <p>Error tracking dataframe</p> <p> </p> RETURNS DESCRIPTION <code>dict</code> <p>validation_statusdf: Updated validation status dataframe   error_trackingdf: Updated error tracking dataframe   duplicated_filesdf:  Duplicated files dataframe</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.validation","title":"<code>validation(syn, project_id, center, process, center_files, format_registry, genie_config, ancillary_files=None)</code>","text":"<p>Validation of all center files</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse object</p> <p> </p> <code>center</code> <p>Center name</p> <p> </p> <code>process</code> <p>main, mutation</p> <p> </p> <code>center_files</code> <p> </p> <code>format_registry</code> <p> </p> <code>genie_config</code> <p> </p> <code>ancillary_files</code> <p> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: Dataframe of valid GENIE files</p>"},{"location":"reference/main_pipeline_steps/input_to_database/input_to_database/#genie.input_to_database.center_input_to_database","title":"<code>center_input_to_database(syn, project_id, center, process, only_validate, delete_old=False, format_registry=None, genie_config=None)</code>","text":"<p>Processing per center</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>project_id</code> <p>GENIE Synapse project id</p> <p> TYPE: <code>str</code> </p> <code>center</code> <p>GENIE center</p> <p> TYPE: <code>str</code> </p> <code>process</code> <p>main or mutation processing</p> <p> TYPE: <code>str</code> </p> <code>only_validate</code> <p>Only validate or not</p> <p> TYPE: <code>bool</code> </p> <code>delete_old</code> <p>Delete old files. Defaults to False.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>format_registry</code> <p>GENIE file format registry.                                      Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>genie_config</code> <p>See example of genie config at                                   ./genie_config.json. Defaults to None.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/","title":"process_mutation","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation","title":"<code>genie.process_mutation</code>","text":"<p>Process mutation files TODO deprecate this module and spread functions around</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.MAF_COL_MAPPING","title":"<code>MAF_COL_MAPPING = {'HUGO_SYMBOL': 'Hugo_Symbol', 'ENTREZ_GENE_ID': 'Entrez_Gene_Id', 'CENTER': 'Center', 'NCBI_BUILD': 'NCBI_Build', 'CHROMOSOME': 'Chromosome', 'START_POSITION': 'Start_Position', 'END_POSITION': 'End_Position', 'STRAND': 'Strand', 'VARIANT_CLASSIFICATION': 'Variant_Classification', 'VARIANT_TYPE': 'Variant_Type', 'REFERENCE_ALLELE': 'Reference_Allele', 'TUMOR_SEQ_ALLELE1': 'Tumor_Seq_Allele1', 'TUMOR_SEQ_ALLELE2': 'Tumor_Seq_Allele2', 'DBSNP_RS': 'dbSNP_RS', 'DBSNP_VAL_STATUS': 'dbSNP_Val_Status', 'TUMOR_SAMPLE_BARCODE': 'Tumor_Sample_Barcode', 'MATCHED_NORM_SAMPLE_BARCODE': 'Matched_Norm_Sample_Barcode', 'MATCH_NORM_SEQ_ALLELE1': 'Match_Norm_Seq_Allele1', 'MATCH_NORM_SEQ_ALLELE2': 'Match_Norm_Seq_Allele2', 'TUMOR_VALIDATION_ALLELE1': 'Tumor_Validation_Allele1', 'TUMOR_VALIDATION_ALLELE2': 'Tumor_Validation_Allele2', 'MATCH_NORM_VALIDATION_ALLELE1': 'Match_Norm_Validation_Allele1', 'MATCH_NORM_VALIDATION_ALLELE2': 'Match_Norm_Validation_Allele2', 'VERIFICATION_STATUS': 'Verification_Status', 'VALIDATION_STATUS': 'Validation_Status', 'MUTATION_STATUS': 'Mutation_Status', 'SEQUENCING_PHASE': 'Sequencing_Phase', 'SEQUENCE_SOURCE': 'Sequence_Source', 'VALIDATION_METHOD': 'Validation_Method', 'SCORE': 'Score', 'BAM_FILE': 'BAM_File', 'SEQUENCER': 'Sequencer', 'T_REF_COUNT': 't_ref_count', 'T_ALT_COUNT': 't_alt_count', 'N_REF_COUNT': 'n_ref_count', 'N_ALT_COUNT': 'n_alt_count', 'ALLELE': 'Allele', 'AMINO_ACID_CHANGE': 'amino_acid_change', 'AMINO_ACIDS': 'Amino_acids', 'CDS_POSITION': 'CDS_position', 'CODONS': 'Codons', 'CONSEQUENCE': 'Consequence', 'EXISTING_VARIATION': 'Existing_variation', 'EXON_NUMBER': 'Exon_Number', 'FEATURE': 'Feature', 'FEATURE_TYPE': 'Feature_type', 'GENE': 'Gene', 'HGVSC': 'HGVSc', 'HGVSP': 'HGVSp', 'HGVSP_SHORT': 'HGVSp_Short', 'HOTSPOT': 'Hotspot', 'MA:FIMPACT': 'MA:FImpact', 'MA:LINK.MSA': 'MA:link.MSA', 'MA:LINK.PDB': 'MA:link.PDB', 'MA:LINK.VAR': 'MA:link.var', 'MA:PROTEIN.CHANGE': 'MA:protein.change', 'POLYPHEN': 'PolyPhen', 'PROTEIN_POSITION': 'Protein_position', 'REFSEQ': 'RefSeq', 'TRANSCRIPT': 'transcript', 'TRANSCRIPT_ID': 'Transcript_ID', 'ALL_EFFECTS': 'all_effects', 'CDNA_CHANGE': 'cdna_change', 'CDNA_POSITION': 'cDNA_position', 'N_DEPTH': 'n_depth', 'T_DEPTH': 't_depth'}</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.KNOWN_STRING_COLS","title":"<code>KNOWN_STRING_COLS = ['IS_NEW', 'ALLELE_NUM', 'Chromosome', 'CLIN_SIG', 'MOTIF_NAME', 'HIGH_INF_POS', 'MINIMISED', 'CHROMOSOME', 'VERIFICATION_STATUS', 'VALIDATION_STATUS', 'MUTATION_STATUS', 'SEQUENCE_SOURCE', 'SEQUENCER', 'REPORT_AF', 'CDNA_CHANGE', 'AMINO_ACID_CHANGE', 'TRANSCRIPT', 'transcript', 'STRAND_VEP', 'HGNC_ID', 'PUBMED', 'PICK', 'Exon_Number', 'genomic_location_explanation', 'Annotation_Status', 'Variant_Classification', 'Transcript_Exon']</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation._convert_to_str_dtype","title":"<code>_convert_to_str_dtype(column_types, known_string_cols)</code>","text":"<p>Sometimes the deteremined dtype is incorrect based off the first 100 rows, update the incorrect dtypes.</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.determine_dtype","title":"<code>determine_dtype(path)</code>","text":"<p>Reads in a dataframe partially and determines the dtype of columns</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.move_and_configure_maf","title":"<code>move_and_configure_maf(mutation_path, input_files_dir)</code>","text":"<p>Moves maf files into processing directory. Maf file's column headers are renamed if necessary and .0 are stripped.</p> PARAMETER DESCRIPTION <code>mutation_path</code> <p>Mutation file path</p> <p> TYPE: <code>str</code> </p> <code>input_files_dir</code> <p>Input file directory</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Filepath to moved and configured maf</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.move_mutation","title":"<code>move_mutation(mutation_path, input_files_dir)</code>","text":"<p>Move mutation file into processing directory</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.process_mutation_workflow","title":"<code>process_mutation_workflow(syn, center, validfiles, genie_config, workdir)</code>","text":"<p>Process vcf/maf workflow</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>Center name</p> <p> TYPE: <code>str</code> </p> <code>validfiles</code> <p>Center validated files</p> <p> TYPE: <code>DataFrame</code> </p> <code>genie_config</code> <p>GENIE configuration.</p> <p> TYPE: <code>dict</code> </p> <code>workdir</code> <p>Working directory</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>Optional[str]</code> <p>Annotated Maf Path. None if there are no valid mutation files.</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.create_annotation_paths","title":"<code>create_annotation_paths(center, workdir)</code>","text":"<p>Creates the filepaths required in the annotation process</p> PARAMETER DESCRIPTION <code>center</code> <p>name of the center</p> <p> TYPE: <code>str</code> </p> <code>workdir</code> <p>work directory to create paths in</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>namedtuple</code> <p>tuple with all the paths</p> <p> TYPE: <code>namedtuple</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.concat_annotation_error_reports","title":"<code>concat_annotation_error_reports(center, input_dir)</code>","text":"<p>Concatenates the annotation error reports</p> PARAMETER DESCRIPTION <code>center</code> <p>name of center associated with error report</p> <p> TYPE: <code>str</code> </p> <code>input_dir</code> <p>directory where error reports are</p> <p> TYPE: <code>str</code> </p> <p>Returns:     pd.DataFrame: full annotation error report</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.check_annotation_error_reports","title":"<code>check_annotation_error_reports(syn, maf_table_synid, full_error_report, center)</code>","text":"<p>A simple QC check to make sure our genome nexus error report    failed annotations matches our final processed maf table's failed    annotations</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse client</p> <p> TYPE: <code>Synapse</code> </p> <code>maf_table_synid</code> <p>synapse_id of the narrow maf table</p> <p> TYPE: <code>str</code> </p> <code>full_error_report</code> <p>the failed annotations error report</p> <p> TYPE: <code>DataFrame</code> </p> <code>center</code> <p>the center this is for</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.store_annotation_error_reports","title":"<code>store_annotation_error_reports(full_error_report, full_error_report_path, syn, errors_folder_synid)</code>","text":"<p>Stores the annotation error reports to synapse</p> PARAMETER DESCRIPTION <code>full_error_report</code> <p>full error report to store</p> <p> TYPE: <code>DataFrame</code> </p> <code>syn</code> <p>synapse client object</p> <p> TYPE: <code>Synapse</code> </p> <code>errors_folder_synid</code> <p>synapse id of error report folder to store reports in</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.annotate_mutation","title":"<code>annotate_mutation(annotation_paths, mutation_files, genie_annotation_pkg, center)</code>","text":"<p>Process vcf/maf files</p> PARAMETER DESCRIPTION <code>center</code> <p>Center name</p> <p> TYPE: <code>str</code> </p> <code>mutation_files</code> <p>list of mutation files</p> <p> TYPE: <code>list</code> </p> <code>genie_annotation_pkg</code> <p>Path to GENIE annotation package</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>None</code> <p>Path to final maf</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.append_or_createdf","title":"<code>append_or_createdf(dataframe, filepath)</code>","text":"<p>Creates a file with the dataframe or appends to a existing file.</p> PARAMETER DESCRIPTION <code>df</code> <p>pandas.dataframe to write out</p> <p> </p> <code>filepath</code> <p>Filepath to append or create</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.format_maf","title":"<code>format_maf(mafdf, center)</code>","text":"<p>Format maf file, shortens the maf file length</p> PARAMETER DESCRIPTION <code>mafdf</code> <p>mutation dataframe</p> <p> TYPE: <code>DataFrame</code> </p> <code>center</code> <p>Center name</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>Formatted mutation dataframe</p>"},{"location":"reference/main_pipeline_steps/input_to_database/process_mutation/#genie.process_mutation.split_and_store_maf","title":"<code>split_and_store_maf(syn, center, maf_tableid, annotation_paths, flatfiles_synid)</code>","text":"<p>Separates annotated maf file into narrow and full maf and stores them</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center</code> <p>Center</p> <p> TYPE: <code>str</code> </p> <code>maf_tableid</code> <p>Mutation table synapse id</p> <p> TYPE: <code>str</code> </p> <code>annotation_paths</code> <p>filepaths in the annotation process</p> <p> TYPE: <code>namedtuple</code> </p> <code>flatfiles_synid</code> <p>GENIE flat files folder</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/","title":"To retract","text":""},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/#genie.toRetract","title":"<code>genie.toRetract</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/#genie.toRetract-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/#genie.toRetract.retract_samples","title":"<code>retract_samples(syn, database_synid, col, remove_values)</code>","text":"<p>Helper retraction function that help remove values from a column in a database</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>databse_synid</code> <p>synapse id of database</p> <p> </p> <code>col</code> <p>column in database</p> <p> </p> <code>remove_values</code> <p>list of values to remove from the column</p> <p> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/#genie.toRetract.retract","title":"<code>retract(syn, project_id)</code>","text":"<p>Main retraction function</p> PARAMETER DESCRIPTION <code>syn</code> <p>synapse object</p> <p> </p> <code>project_id</code> <p>Synapse Project ID with a database mapping table</p> <p> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/to_retract/#genie.toRetract.main","title":"<code>main()</code>","text":"<p>Main block with argparse and calls the main retract function</p>"},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/","title":"write_invalid_reasons","text":""},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons","title":"<code>genie.write_invalid_reasons</code>","text":"<p>Write invalid reasons</p>"},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons-attributes","title":"Attributes","text":""},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons.logger","title":"<code>logger = logging.getLogger(__name__)</code>  <code>module-attribute</code>","text":""},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons-functions","title":"Functions","text":""},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons.write","title":"<code>write(syn, center_mapping_synid, error_tracker_synid)</code>","text":"<p>Write center errors to a file called {center}_validation_errors.txt and     save it to the errors folder in the center's folder</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center_mapping_synid</code> <p>Center mapping table's synapse id</p> <p> TYPE: <code>str</code> </p> <code>error_tracker_synid</code> <p>Error tracking table's synapse id</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons._combine_center_file_errors","title":"<code>_combine_center_file_errors(syn, center_errorsdf)</code>","text":"<p>Combine all center errors into one printable string</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>center_errorsdf</code> <p>Center errors dataframe</p> <p> TYPE: <code>DataFrame</code> </p> RETURNS DESCRIPTION <code>str</code> <p>Center errors in a pretty formatted string</p> <p> TYPE: <code>str</code> </p>"},{"location":"reference/main_pipeline_steps/input_to_database/write_invalid_reasons/#genie.write_invalid_reasons.get_center_invalid_errors","title":"<code>get_center_invalid_errors(syn, error_tracker_synid)</code>","text":"<p>Get all invalid errors per center</p> PARAMETER DESCRIPTION <code>syn</code> <p>Synapse connection</p> <p> TYPE: <code>Synapse</code> </p> <code>error_tracker_synid</code> <p>Synapse id of invalid error database table</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>{center: file error string}</p> <p> TYPE: <code>dict</code> </p>"},{"location":"tutorials/local_file_validation/","title":"Local File Validation","text":"<p>One of the features of the <code>aacrgenie</code> package is that is provides a local validation tool that GENIE data contributors and install and use to validate their files locally prior to uploading to Synapse.</p>"},{"location":"tutorials/local_file_validation/#setting-up-your-environment","title":"Setting up your environment","text":"<p>These instructions will install all the necessary components for you to run the validator locally on all of your files, including the Synapse client.</p> <ol> <li>Create a virtual environment using package manager of your choice (e.g: <code>conda</code>, <code>pipenv</code>, <code>pip</code>)</li> </ol> <p>Example of creating a simple python environment</p> <pre><code>python3 -m venv &lt;env_name&gt;\nsource &lt;env_name&gt;/bin/activate\n</code></pre> <ol> <li>Install the genie package</li> </ol> <pre><code>pip install aacrgenie\n</code></pre> <ol> <li>Verify the installation</li> </ol> <pre><code>genie -v\n</code></pre> <ol> <li>Set up authentication with Synapse through the local .synapseConfig or using an environment variable</li> </ol> <p>This will install all the necessary components for you to run the validator locally on all of your files, including the Synapse client.</p>"},{"location":"tutorials/local_file_validation/#running-the-validator","title":"Running the validator","text":"<p>Please view the help to see how to run the validator.</p> <pre><code>genie validate -h\n</code></pre> <p>Validate a file</p> <pre><code>genie validate data_clinical_supp_SAGE.txt SAGE\n</code></pre>"},{"location":"tutorials/local_file_validation/#special-consideration","title":"Special Consideration","text":"<p>The flag <code>--skip-database-checks</code> is REQUIRED when running the validator for cna and assay information files because you would need access to internal bed and clinical database tables respectively without it. Without the flag, you will hit an Synapse <code>READ access</code> error.</p>"},{"location":"tutorials/local_file_validation/#examples","title":"Examples","text":"<p>Running validator on cna file.</p> <pre><code>genie validate data_cna_SAGE.txt SAGE --skip-database-checks\n</code></pre> <p>Running validator on assay_information file.</p> <pre><code>genie validate assay_information.yaml SAGE --skip-database-checks\n</code></pre>"}]}